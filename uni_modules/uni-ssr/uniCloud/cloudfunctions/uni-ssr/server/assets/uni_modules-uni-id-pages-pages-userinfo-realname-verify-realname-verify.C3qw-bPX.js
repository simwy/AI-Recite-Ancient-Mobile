"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("@dcloudio/uni-h5"),t=require("@dcloudio/uni-cloud"),a=require("./uni-list-item.DbqdfHei.js"),r=require("vue"),l=require("@dcloudio/uni-app"),o=require("./uni-forms.CJ4dDWzJ.js"),i=require("./uni-forms-item.D3d2HZ7Y.js"),n=require("./uni-easyinput.C_oEcPLw.js"),d=require("./uni-id-pages-agreements.9JZ6pWUW.js"),s=require("./login-page.mixin.BWGCa6Ap.js"),c=require("./store.Cv4WGu-a.js"),u=require("./_plugin-vue_export-helper.BDcHAK_d.js");require("./uni-icons.DF9TZjrB.js"),require("./uni-popup.B_u0Fe_N.js"),require("./uni-popup-dialog.BiXp_EP-.js"),require("@dcloudio/uni-i18n"),require("../entry-server.js"),require("vue-i18n"),require("@vue/server-renderer"),require("@dcloudio/uni-shared"),require("@vue/shared");const m="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1675667510055'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='4003'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M807.936%20106.656h-76a24.32%2024.32%200%200%200-17.92%207.936%2027.744%2027.744%200%200%200-7.424%2019.104c0%206.944%202.464%2013.792%207.424%2019.104a24.32%2024.32%200%200%200%2017.92%207.904h76v81.088c0%206.944%202.432%2013.76%207.424%2019.104a24.32%2024.32%200%200%200%2035.808%200%2027.744%2027.744%200%200%200%207.424-19.104V160.704c0-29.824-22.72-54.048-50.656-54.048zM833.248%20512a25.12%2025.12%200%200%200-17.92%207.392%2025.12%2025.12%200%200%200-7.392%2017.92v76h-76a25.12%2025.12%200%200%200-17.92%207.424c-1.344%201.344-2.08%203.072-3.072%204.704-28.576-27.52-60.704-50.112-96.256-65.152%2072.192-43.136%20117.888-126.08%20103.872-219.296-13.216-87.456-81.056-160.576-167.648-178.656a228.16%20228.16%200%200%200-46.944-4.896%20217.056%20217.056%200%200%200-217.12%20217.12c0%2079.264%2042.976%20147.936%20106.368%20185.824-35.456%2015.04-67.648%2037.632-96.256%2065.152-0.96-1.632-1.696-3.36-3.072-4.704a25.12%2025.12%200%200%200-17.92-7.424H200v-76a25.12%2025.12%200%200%200-7.424-17.92%2025.12%2025.12%200%200%200-17.92-7.424%2025.12%2025.12%200%200%200-17.92%207.424%2025.12%2025.12%200%200%200-7.392%2017.92v76c0%2027.936%2022.72%2050.656%2050.656%2050.656H262.4c-42.336%2054.816-71.712%20123.488-80.96%20200.192-3.424%2028.224%2019.104%2053.12%2047.488%2053.12h550.048c28.416%200%2050.848-24.96%2047.488-53.12-9.216-76.8-38.624-145.472-80.96-200.288h62.4c27.968%200%2050.688-22.72%2050.688-50.656V537.28a25.12%2025.12%200%200%200-7.424-17.92%2025.12%2025.12%200%200%200-17.92-7.392zM174.72%20268.8a24.32%2024.32%200%200%200%2017.888-7.904%2027.744%2027.744%200%200%200%207.424-19.104V160.704h76a24.32%2024.32%200%200%200%2017.92-7.904%2027.744%2027.744%200%200%200%207.392-19.104%2027.744%2027.744%200%200%200-7.424-19.104%2024.32%2024.32%200%200%200-17.92-7.936H200c-27.968%200-50.656%2024.224-50.656%2054.08v81.056c0%206.944%202.432%2013.76%207.392%2019.104a24.32%2024.32%200%200%200%2017.92%207.904z'%20fill='%2372a7ff'%20p-id='4004'%3e%3c/path%3e%3c/svg%3e";t.importObject("uni-id-co");const p={mixins:[s.mixin],data:()=>({realName:"",idCard:"",certifyId:"",verifyFail:!1,verifyFailCode:0,verifyFailTitle:"",verifyFailContent:""}),computed:{userInfo:()=>c.store.userInfo,certifyIdNext(){return Boolean(this.realName)&&Boolean(this.idCard)&&this.needAgreements&&this.agree},isCertify(){return this.userInfo.realNameAuth&&2===this.userInfo.realNameAuth.authStatus},isDev:()=>!1},onLoad(){const t=e.getStorageSync("uni-id-pages-temp-frv");t&&(this.realName=t.realName,this.idCard=t.idCard)},methods:{async getCertifyId(){if(this.certifyIdNext)return e.showModal({content:"暂不支持实名认证",showCancel:!1})},startFacialRecognitionVerify(){},async getFrvAuthResult(){const a=t.importObject("uni-id-co",{customUI:!0});try{e.showLoading({title:"验证中...",mask:!1});const t=await a.getFrvAuthResult({certifyId:this.certifyId}),{errCode:r,...l}=t;this.verifyFailContent&&console.log(`[frv-debug] 客户端刷脸失败，由实人认证服务查询具体原因，原因：${this.verifyFailContent}`),e.showModal({content:"实名认证成功",showCancel:!1,success:()=>{c.mutations.setUserInfo({realNameAuth:l}),this.verifyFail=!1}}),e.removeStorage({key:"uni-id-pages-temp-frv"})}catch(r){this.verifyFail=!0,this.verifyFailTitle=r.errMsg,console.error(JSON.stringify(r))}finally{e.hideLoading()}},retry(){10013!==this.verifyFailCode?this.getCertifyId():this.verifyFail=!1}}};const f=p.setup;p.setup=(e,t)=>{const a=r.useSSRContext();return(a.modules||(a.modules=new Set)).add("uni_modules/uni-id-pages/pages/userinfo/realname-verify/realname-verify.vue"),f?f(e,t):void 0};const C=u._export_sfc(p,[["ssrRender",function(t,s,c,p,f,C,y,h){const x=e.View,V=l.resolveEasycom(r.resolveDynamicComponent("uni-list"),a.__easycom_1),N=l.resolveEasycom(r.resolveDynamicComponent("uni-list-item"),a.__easycom_2),v=e.Image,g=e.Button,_=e.Text,w=l.resolveEasycom(r.resolveDynamicComponent("uni-forms"),o.__easycom_4),k=l.resolveEasycom(r.resolveDynamicComponent("uni-forms-item"),i.__easycom_5),T=l.resolveEasycom(r.resolveDynamicComponent("uni-easyinput"),n.__easycom_6),b=l.resolveEasycom(r.resolveDynamicComponent("uni-id-pages-agreements"),d.__easycom_7);s(u.ssrRenderComponent(x,p,{default:r.withCtx(((e,t,a,l)=>{if(!t)return[h.isCertify?(r.openBlock(),r.createBlock(V,{key:0},{default:r.withCtx((()=>[r.createVNode(N,{class:"item",title:"姓名",rightText:h.userInfo.realNameAuth.realName},null,8,["rightText"]),r.createVNode(N,{class:"item",title:"身份证号码",rightText:h.userInfo.realNameAuth.identity},null,8,["rightText"])])),_:1})):(r.openBlock(),r.createBlock(x,{key:1,class:"uni-content"},{default:r.withCtx((()=>[y.verifyFail?(r.openBlock(),r.createBlock(r.Fragment,{key:0},[r.createVNode(x,{class:"face-icon"},{default:r.withCtx((()=>[r.createVNode(v,{src:m,class:"face-icon-image"})])),_:1}),r.createVNode(x,{class:"error-title"},{default:r.withCtx((()=>[r.createTextVNode(r.toDisplayString(y.verifyFailTitle),1)])),_:1}),r.createVNode(x,{class:"error-description"},{default:r.withCtx((()=>[r.createTextVNode(r.toDisplayString(y.verifyFailContent),1)])),_:1}),10013!==y.verifyFailCode?(r.openBlock(),r.createBlock(g,{key:0,type:"primary",onClick:h.retry},{default:r.withCtx((()=>[r.createTextVNode("重新开始验证")])),_:1},8,["onClick"])):(r.openBlock(),r.createBlock(g,{key:1,type:"primary",onClick:h.retry},{default:r.withCtx((()=>[r.createTextVNode("返回")])),_:1},8,["onClick"])),h.isDev?(r.openBlock(),r.createBlock(x,{key:2,class:"dev-tip"},{default:r.withCtx((()=>[r.createTextVNode("请在控制台查看详细错误（此提示仅在开发环境展示）")])),_:1})):r.createCommentVNode("",!0)],64)):(r.openBlock(),r.createBlock(r.Fragment,{key:1},[r.createVNode(_,{class:"title"},{default:r.withCtx((()=>[r.createTextVNode("实名认证")])),_:1}),r.createVNode(w,null,{default:r.withCtx((()=>[r.createVNode(k,{name:"realName"},{default:r.withCtx((()=>[r.createVNode(T,{placeholder:"姓名",class:"input-box",modelValue:y.realName,"onUpdate:modelValue":e=>y.realName=e,clearable:!1},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),r.createVNode(k,{name:"idCard"},{default:r.withCtx((()=>[r.createVNode(T,{placeholder:"身份证号码",class:"input-box",modelValue:y.idCard,"onUpdate:modelValue":e=>y.idCard=e,clearable:!1},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1}),r.createVNode(b,{scope:"realNameVerify",ref:"agreements",style:{"margin-bottom":"20px"}},null,512),r.createVNode(g,{type:"primary",disabled:!h.certifyIdNext,onClick:h.getCertifyId},{default:r.withCtx((()=>[r.createTextVNode("确定")])),_:1},8,["disabled","onClick"])],64))])),_:1}))];h.isCertify?t(u.ssrRenderComponent(V,null,{default:r.withCtx(((e,t,a,l)=>{if(!t)return[r.createVNode(N,{class:"item",title:"姓名",rightText:h.userInfo.realNameAuth.realName},null,8,["rightText"]),r.createVNode(N,{class:"item",title:"身份证号码",rightText:h.userInfo.realNameAuth.identity},null,8,["rightText"])];t(u.ssrRenderComponent(N,{class:"item",title:"姓名",rightText:h.userInfo.realNameAuth.realName},null,a,l)),t(u.ssrRenderComponent(N,{class:"item",title:"身份证号码",rightText:h.userInfo.realNameAuth.identity},null,a,l))})),_:1},a,l)):t(u.ssrRenderComponent(x,{class:"uni-content"},{default:r.withCtx(((e,t,a,l)=>{if(!t)return[y.verifyFail?(r.openBlock(),r.createBlock(r.Fragment,{key:0},[r.createVNode(x,{class:"face-icon"},{default:r.withCtx((()=>[r.createVNode(v,{src:m,class:"face-icon-image"})])),_:1}),r.createVNode(x,{class:"error-title"},{default:r.withCtx((()=>[r.createTextVNode(r.toDisplayString(y.verifyFailTitle),1)])),_:1}),r.createVNode(x,{class:"error-description"},{default:r.withCtx((()=>[r.createTextVNode(r.toDisplayString(y.verifyFailContent),1)])),_:1}),10013!==y.verifyFailCode?(r.openBlock(),r.createBlock(g,{key:0,type:"primary",onClick:h.retry},{default:r.withCtx((()=>[r.createTextVNode("重新开始验证")])),_:1},8,["onClick"])):(r.openBlock(),r.createBlock(g,{key:1,type:"primary",onClick:h.retry},{default:r.withCtx((()=>[r.createTextVNode("返回")])),_:1},8,["onClick"])),h.isDev?(r.openBlock(),r.createBlock(x,{key:2,class:"dev-tip"},{default:r.withCtx((()=>[r.createTextVNode("请在控制台查看详细错误（此提示仅在开发环境展示）")])),_:1})):r.createCommentVNode("",!0)],64)):(r.openBlock(),r.createBlock(r.Fragment,{key:1},[r.createVNode(_,{class:"title"},{default:r.withCtx((()=>[r.createTextVNode("实名认证")])),_:1}),r.createVNode(w,null,{default:r.withCtx((()=>[r.createVNode(k,{name:"realName"},{default:r.withCtx((()=>[r.createVNode(T,{placeholder:"姓名",class:"input-box",modelValue:y.realName,"onUpdate:modelValue":e=>y.realName=e,clearable:!1},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),r.createVNode(k,{name:"idCard"},{default:r.withCtx((()=>[r.createVNode(T,{placeholder:"身份证号码",class:"input-box",modelValue:y.idCard,"onUpdate:modelValue":e=>y.idCard=e,clearable:!1},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1}),r.createVNode(b,{scope:"realNameVerify",ref:"agreements",style:{"margin-bottom":"20px"}},null,512),r.createVNode(g,{type:"primary",disabled:!h.certifyIdNext,onClick:h.getCertifyId},{default:r.withCtx((()=>[r.createTextVNode("确定")])),_:1},8,["disabled","onClick"])],64))];y.verifyFail?(t("\x3c!--[--\x3e"),t(u.ssrRenderComponent(x,{class:"face-icon"},{default:r.withCtx(((e,t,a,l)=>{if(!t)return[r.createVNode(v,{src:m,class:"face-icon-image"})];t(u.ssrRenderComponent(v,{src:m,class:"face-icon-image"},null,a,l))})),_:1},a,l)),t(u.ssrRenderComponent(x,{class:"error-title"},{default:r.withCtx(((e,t,a,l)=>{if(!t)return[r.createTextVNode(r.toDisplayString(y.verifyFailTitle),1)];t(`${u.ssrInterpolate(y.verifyFailTitle)}`)})),_:1},a,l)),t(u.ssrRenderComponent(x,{class:"error-description"},{default:r.withCtx(((e,t,a,l)=>{if(!t)return[r.createTextVNode(r.toDisplayString(y.verifyFailContent),1)];t(`${u.ssrInterpolate(y.verifyFailContent)}`)})),_:1},a,l)),10013!==y.verifyFailCode?t(u.ssrRenderComponent(g,{type:"primary",onClick:h.retry},{default:r.withCtx(((e,t,a,l)=>{if(!t)return[r.createTextVNode("重新开始验证")];t("重新开始验证")})),_:1},a,l)):t(u.ssrRenderComponent(g,{type:"primary",onClick:h.retry},{default:r.withCtx(((e,t,a,l)=>{if(!t)return[r.createTextVNode("返回")];t("返回")})),_:1},a,l)),h.isDev?t(u.ssrRenderComponent(x,{class:"dev-tip"},{default:r.withCtx(((e,t,a,l)=>{if(!t)return[r.createTextVNode("请在控制台查看详细错误（此提示仅在开发环境展示）")];t("请在控制台查看详细错误（此提示仅在开发环境展示）")})),_:1},a,l)):t("\x3c!----\x3e"),t("\x3c!--]--\x3e")):(t("\x3c!--[--\x3e"),t(u.ssrRenderComponent(_,{class:"title"},{default:r.withCtx(((e,t,a,l)=>{if(!t)return[r.createTextVNode("实名认证")];t("实名认证")})),_:1},a,l)),t(u.ssrRenderComponent(w,null,{default:r.withCtx(((e,t,a,l)=>{if(!t)return[r.createVNode(k,{name:"realName"},{default:r.withCtx((()=>[r.createVNode(T,{placeholder:"姓名",class:"input-box",modelValue:y.realName,"onUpdate:modelValue":e=>y.realName=e,clearable:!1},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),r.createVNode(k,{name:"idCard"},{default:r.withCtx((()=>[r.createVNode(T,{placeholder:"身份证号码",class:"input-box",modelValue:y.idCard,"onUpdate:modelValue":e=>y.idCard=e,clearable:!1},null,8,["modelValue","onUpdate:modelValue"])])),_:1})];t(u.ssrRenderComponent(k,{name:"realName"},{default:r.withCtx(((e,t,a,l)=>{if(!t)return[r.createVNode(T,{placeholder:"姓名",class:"input-box",modelValue:y.realName,"onUpdate:modelValue":e=>y.realName=e,clearable:!1},null,8,["modelValue","onUpdate:modelValue"])];t(u.ssrRenderComponent(T,{placeholder:"姓名",class:"input-box",modelValue:y.realName,"onUpdate:modelValue":e=>y.realName=e,clearable:!1},null,a,l))})),_:1},a,l)),t(u.ssrRenderComponent(k,{name:"idCard"},{default:r.withCtx(((e,t,a,l)=>{if(!t)return[r.createVNode(T,{placeholder:"身份证号码",class:"input-box",modelValue:y.idCard,"onUpdate:modelValue":e=>y.idCard=e,clearable:!1},null,8,["modelValue","onUpdate:modelValue"])];t(u.ssrRenderComponent(T,{placeholder:"身份证号码",class:"input-box",modelValue:y.idCard,"onUpdate:modelValue":e=>y.idCard=e,clearable:!1},null,a,l))})),_:1},a,l))})),_:1},a,l)),t(u.ssrRenderComponent(b,{scope:"realNameVerify",ref:"agreements",style:{"margin-bottom":"20px"}},null,a,l)),t(u.ssrRenderComponent(g,{type:"primary",disabled:!h.certifyIdNext,onClick:h.getCertifyId},{default:r.withCtx(((e,t,a,l)=>{if(!t)return[r.createTextVNode("确定")];t("确定")})),_:1},a,l)),t("\x3c!--]--\x3e"))})),_:1},a,l))})),_:1},c))}],["__scopeId","data-v-3c012959"]]);exports.default=C;
