"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("@dcloudio/uni-h5"),o=require("@dcloudio/uni-cloud"),t=require("./uni-match-media.-lgn3PGo.js"),r=require("vue"),a=require("@dcloudio/uni-app"),n=require("./uni-easyinput.C_oEcPLw.js"),s=require("./uni-id-pages-sms-form.BmxwzBZ8.js"),i=require("./uni-popup-captcha.aJ30TQep.js"),l=require("./store.Cv4WGu-a.js"),u=require("./_plugin-vue_export-helper.BDcHAK_d.js");require("./uni-icons.DF9TZjrB.js"),require("./uni-captcha.5CORWJZL.js"),require("./uni-popup.B_u0Fe_N.js"),require("../entry-server.js"),require("vue-i18n"),require("@vue/server-renderer"),require("@dcloudio/uni-shared"),require("@vue/shared");const d={data:()=>({formData:{mobile:"",code:"",captcha:""},focusMobile:!0,logo:"/static/logo.png"}),computed:{tipText(){return`验证码已通过短信发送至 ${this.formData.mobile}。密码为6 - 20位`}},onLoad(e){},onReady(){},methods:{submit(){if(!/^1\d{10}$/.test(this.formData.mobile))return this.focusMobile=!0,e.showToast({title:"手机号码格式不正确",icon:"none",duration:3e3});if(!/^\d{6}$/.test(this.formData.code))return this.$refs.smsForm.focusSmsCodeInput=!0,e.showToast({title:"验证码格式不正确",icon:"none",duration:3e3});o.importObject("uni-id-co").bindMobileBySms(this.formData).then((o=>{e.showToast({title:o.errMsg,icon:"none",duration:3e3}),this.getOpenerEventChannel(),l.mutations.setUserInfo(this.formData),e.navigateBack()})).catch((e=>{console.log(e),"uni-id-captcha-required"==e.errCode&&this.$refs.popup.open()})).finally((e=>{this.formData.captcha=""}))}}};const m=d.setup;d.setup=(e,o)=>{const t=r.useSSRContext();return(t.modules||(t.modules=new Set)).add("uni_modules/uni-id-pages/pages/userinfo/bind-mobile/bind-mobile.vue"),m?m(e,o):void 0};const c=u._export_sfc(d,[["ssrRender",function(o,l,d,m,c,p,f,b){const h=e.View,V=a.resolveEasycom(r.resolveDynamicComponent("uni-match-media"),t.__easycom_1),C=e.Image,x=e.Text,y=a.resolveEasycom(r.resolveDynamicComponent("uni-easyinput"),n.__easycom_6),_=a.resolveEasycom(r.resolveDynamicComponent("uni-id-pages-sms-form"),s.__easycom_7),g=e.Button,D=a.resolveEasycom(r.resolveDynamicComponent("uni-popup-captcha"),i.__easycom_9);l(u.ssrRenderComponent(h,r.mergeProps({class:"uni-content"},m),{default:r.withCtx(((e,o,t,a)=>{if(!o)return[r.createVNode(V,{"min-width":690},{default:r.withCtx((()=>[r.createVNode(h,{class:"login-logo"},{default:r.withCtx((()=>[r.createVNode(C,{src:f.logo},null,8,["src"])])),_:1}),r.createVNode(x,{class:"title title-box"},{default:r.withCtx((()=>[r.createTextVNode("绑定手机号")])),_:1})])),_:1}),r.createVNode(y,{clearable:"",focus:f.focusMobile,onBlur:e=>f.focusMobile=!1,type:"number",class:"input-box",inputBorder:!1,modelValue:f.formData.mobile,"onUpdate:modelValue":e=>f.formData.mobile=e,maxlength:"11",placeholder:"请输入手机号"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"]),r.createVNode(_,{ref:"smsForm",type:"bind-mobile-by-sms",modelValue:f.formData.code,"onUpdate:modelValue":e=>f.formData.code=e,phone:f.formData.mobile},null,8,["modelValue","onUpdate:modelValue","phone"]),r.createVNode(g,{class:"uni-btn send-btn-box",type:"primary",onClick:b.submit},{default:r.withCtx((()=>[r.createTextVNode("提交")])),_:1},8,["onClick"]),r.createVNode(D,{onConfirm:b.submit,modelValue:f.formData.captcha,"onUpdate:modelValue":e=>f.formData.captcha=e,scene:"bind-mobile-by-sms",ref:"popup"},null,8,["onConfirm","modelValue","onUpdate:modelValue"])];o(u.ssrRenderComponent(V,{"min-width":690},{default:r.withCtx(((e,o,t,a)=>{if(!o)return[r.createVNode(h,{class:"login-logo"},{default:r.withCtx((()=>[r.createVNode(C,{src:f.logo},null,8,["src"])])),_:1}),r.createVNode(x,{class:"title title-box"},{default:r.withCtx((()=>[r.createTextVNode("绑定手机号")])),_:1})];o(u.ssrRenderComponent(h,{class:"login-logo"},{default:r.withCtx(((e,o,t,a)=>{if(!o)return[r.createVNode(C,{src:f.logo},null,8,["src"])];o(u.ssrRenderComponent(C,{src:f.logo},null,t,a))})),_:1},t,a)),o(u.ssrRenderComponent(x,{class:"title title-box"},{default:r.withCtx(((e,o,t,a)=>{if(!o)return[r.createTextVNode("绑定手机号")];o("绑定手机号")})),_:1},t,a))})),_:1},t,a)),o(u.ssrRenderComponent(y,{clearable:"",focus:f.focusMobile,onBlur:e=>f.focusMobile=!1,type:"number",class:"input-box",inputBorder:!1,modelValue:f.formData.mobile,"onUpdate:modelValue":e=>f.formData.mobile=e,maxlength:"11",placeholder:"请输入手机号"},null,t,a)),o(u.ssrRenderComponent(_,{ref:"smsForm",type:"bind-mobile-by-sms",modelValue:f.formData.code,"onUpdate:modelValue":e=>f.formData.code=e,phone:f.formData.mobile},null,t,a)),o(u.ssrRenderComponent(g,{class:"uni-btn send-btn-box",type:"primary",onClick:b.submit},{default:r.withCtx(((e,o,t,a)=>{if(!o)return[r.createTextVNode("提交")];o("提交")})),_:1},t,a)),o(u.ssrRenderComponent(D,{onConfirm:b.submit,modelValue:f.formData.captcha,"onUpdate:modelValue":e=>f.formData.captcha=e,scene:"bind-mobile-by-sms",ref:"popup"},null,t,a))})),_:1},d))}],["__scopeId","data-v-8ad2d767"]]);exports.default=c;
