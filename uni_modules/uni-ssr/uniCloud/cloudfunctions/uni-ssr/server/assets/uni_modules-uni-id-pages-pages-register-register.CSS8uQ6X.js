"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("@dcloudio/uni-h5"),o=require("@dcloudio/uni-cloud"),a=require("./uni-match-media.-lgn3PGo.js"),t=require("vue"),r=require("@dcloudio/uni-app"),s=require("./uni-forms.CJ4dDWzJ.js"),l=require("./uni-forms-item.D3d2HZ7Y.js"),n=require("./uni-easyinput.C_oEcPLw.js"),d=require("./uni-captcha.5CORWJZL.js"),u=require("./uni-id-pages-agreements.9JZ6pWUW.js"),i=require("./validator.CXP7XE2B.js"),c=require("./login-page.mixin.BWGCa6Ap.js");require("./store.Cv4WGu-a.js");const m=require("./_plugin-vue_export-helper.BDcHAK_d.js");require("./uni-icons.DF9TZjrB.js"),require("./uni-popup.B_u0Fe_N.js"),require("./uni-popup-dialog.BiXp_EP-.js"),require("@dcloudio/uni-i18n"),require("../entry-server.js"),require("vue-i18n"),require("@vue/server-renderer"),require("@dcloudio/uni-shared"),require("./password.BqUPu9Pe.js"),require("@vue/shared");const p=o.importObject("uni-id-co"),f={mixins:[c.mixin],data:()=>({formData:{username:"",nickname:"",password:"",password2:"",captcha:""},rules:i.rules,focusUsername:!1,focusNickname:!1,focusPassword:!1,focusPassword2:!1,logo:"/static/logo.png"}),onReady(){this.$refs.form.setRules(this.rules)},onShow(){document.onkeydown=e=>{var o=e||window.event;o&&13==o.keyCode&&this.submit()}},methods:{submit(){this.$refs.form.validate().then((o=>4!=this.formData.captcha.length?(this.$refs.captcha.focusCaptchaInput=!0,e.showToast({title:"请输入验证码",icon:"none",duration:3e3})):this.needAgreements&&!this.agree?this.$refs.agreements.popup((()=>{this.submitForm(o)})):void this.submitForm(o))).catch((e=>{let o=e[0].key;o=o.replace(o[0],o[0].toUpperCase()),this["focus"+o]=!0}))},submitForm(e){p.registerUser(this.formData).then((e=>{this.loginSuccess(e)})).catch((e=>{console.log(e.message),this.$refs.captcha.getImageCaptcha()}))},navigateBack(){e.navigateBack()},toLogin(){e.navigateTo({url:"/uni_modules/uni-id-pages/pages/login/login-withpwd"})},registerByEmail(){e.navigateTo({url:"/uni_modules/uni-id-pages/pages/register/register-by-email"})}}};const V=f.setup;f.setup=(e,o)=>{const a=t.useSSRContext();return(a.modules||(a.modules=new Set)).add("uni_modules/uni-id-pages/pages/register/register.vue"),V?V(e,o):void 0};const h=m._export_sfc(f,[["ssrRender",function(o,i,c,p,f,V,h,w){const C=e.View,x=r.resolveEasycom(t.resolveDynamicComponent("uni-match-media"),a.__easycom_1),g=e.Image,N=e.Text,k=r.resolveEasycom(t.resolveDynamicComponent("uni-forms"),s.__easycom_4),_=r.resolveEasycom(t.resolveDynamicComponent("uni-forms-item"),l.__easycom_5),D=r.resolveEasycom(t.resolveDynamicComponent("uni-easyinput"),n.__easycom_6),b=r.resolveEasycom(t.resolveDynamicComponent("uni-captcha"),d.__easycom_1),B=r.resolveEasycom(t.resolveDynamicComponent("uni-id-pages-agreements"),u.__easycom_7),U=e.Button;i(m.ssrRenderComponent(C,t.mergeProps({class:"uni-content"},p),{default:t.withCtx(((e,a,r,s)=>{if(!a)return[t.createVNode(x,{"min-width":690},{default:t.withCtx((()=>[t.createVNode(C,{class:"login-logo"},{default:t.withCtx((()=>[t.createVNode(g,{src:h.logo},null,8,["src"])])),_:1}),t.createVNode(N,{class:"title title-box"},{default:t.withCtx((()=>[t.createTextVNode("用户名密码注册")])),_:1})])),_:1}),t.createVNode(k,{ref:"form",value:h.formData,rules:h.rules,"validate-trigger":"submit","err-show-type":"toast"},{default:t.withCtx((()=>[t.createVNode(_,{name:"username",required:""},{default:t.withCtx((()=>[t.createVNode(D,{inputBorder:!1,focus:h.focusUsername,onBlur:e=>h.focusUsername=!1,class:"input-box",placeholder:"请输入用户名",modelValue:h.formData.username,"onUpdate:modelValue":e=>h.formData.username=e,trim:"both"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])])),_:1}),t.createVNode(_,{name:"nickname"},{default:t.withCtx((()=>[t.createVNode(D,{inputBorder:!1,focus:h.focusNickname,onBlur:e=>h.focusNickname=!1,class:"input-box",placeholder:"请输入用户昵称",modelValue:h.formData.nickname,"onUpdate:modelValue":e=>h.formData.nickname=e,trim:"both"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])])),_:1}),t.createVNode(_,{name:"password",modelValue:h.formData.password,"onUpdate:modelValue":e=>h.formData.password=e,required:""},{default:t.withCtx((()=>[t.createVNode(D,{inputBorder:!1,focus:h.focusPassword,onBlur:e=>h.focusPassword=!1,class:"input-box",maxlength:"20",placeholder:"请输入"+("weak"==o.config.passwordStrength?"6":"8")+"-16位密码",type:"password",modelValue:h.formData.password,"onUpdate:modelValue":e=>h.formData.password=e,trim:"both"},null,8,["focus","onBlur","placeholder","modelValue","onUpdate:modelValue"])])),_:1},8,["modelValue","onUpdate:modelValue"]),t.createVNode(_,{name:"password2",modelValue:h.formData.password2,"onUpdate:modelValue":e=>h.formData.password2=e,required:""},{default:t.withCtx((()=>[t.createVNode(D,{inputBorder:!1,focus:h.focusPassword2,onBlur:e=>h.focusPassword2=!1,class:"input-box",placeholder:"再次输入密码",maxlength:"20",type:"password",modelValue:h.formData.password2,"onUpdate:modelValue":e=>h.formData.password2=e,trim:"both"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])])),_:1},8,["modelValue","onUpdate:modelValue"]),t.createVNode(_,null,{default:t.withCtx((()=>[t.createVNode(b,{ref:"captcha",scene:"register",modelValue:h.formData.captcha,"onUpdate:modelValue":e=>h.formData.captcha=e},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),t.createVNode(B,{scope:"register",ref:"agreements"},null,512),t.createVNode(U,{class:"uni-btn",type:"primary",onClick:w.submit},{default:t.withCtx((()=>[t.createTextVNode("注册")])),_:1},8,["onClick"]),t.createVNode(U,{onClick:w.navigateBack,class:"register-back"},{default:t.withCtx((()=>[t.createTextVNode("返回")])),_:1},8,["onClick"]),t.createVNode(x,{"min-width":690},{default:t.withCtx((()=>[t.createVNode(C,{class:"link-box"},{default:t.withCtx((()=>[t.createVNode(N,{class:"link",onClick:w.registerByEmail},{default:t.withCtx((()=>[t.createTextVNode("邮箱验证码注册")])),_:1},8,["onClick"]),t.createVNode(N,{class:"link",onClick:w.toLogin},{default:t.withCtx((()=>[t.createTextVNode("已有账号？点此登录")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["value","rules"])];a(m.ssrRenderComponent(x,{"min-width":690},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createVNode(C,{class:"login-logo"},{default:t.withCtx((()=>[t.createVNode(g,{src:h.logo},null,8,["src"])])),_:1}),t.createVNode(N,{class:"title title-box"},{default:t.withCtx((()=>[t.createTextVNode("用户名密码注册")])),_:1})];o(m.ssrRenderComponent(C,{class:"login-logo"},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createVNode(g,{src:h.logo},null,8,["src"])];o(m.ssrRenderComponent(g,{src:h.logo},null,a,r))})),_:1},a,r)),o(m.ssrRenderComponent(N,{class:"title title-box"},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createTextVNode("用户名密码注册")];o("用户名密码注册")})),_:1},a,r))})),_:1},r,s)),a(m.ssrRenderComponent(k,{ref:"form",value:h.formData,rules:h.rules,"validate-trigger":"submit","err-show-type":"toast"},{default:t.withCtx(((e,a,r,s)=>{if(!a)return[t.createVNode(_,{name:"username",required:""},{default:t.withCtx((()=>[t.createVNode(D,{inputBorder:!1,focus:h.focusUsername,onBlur:e=>h.focusUsername=!1,class:"input-box",placeholder:"请输入用户名",modelValue:h.formData.username,"onUpdate:modelValue":e=>h.formData.username=e,trim:"both"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])])),_:1}),t.createVNode(_,{name:"nickname"},{default:t.withCtx((()=>[t.createVNode(D,{inputBorder:!1,focus:h.focusNickname,onBlur:e=>h.focusNickname=!1,class:"input-box",placeholder:"请输入用户昵称",modelValue:h.formData.nickname,"onUpdate:modelValue":e=>h.formData.nickname=e,trim:"both"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])])),_:1}),t.createVNode(_,{name:"password",modelValue:h.formData.password,"onUpdate:modelValue":e=>h.formData.password=e,required:""},{default:t.withCtx((()=>[t.createVNode(D,{inputBorder:!1,focus:h.focusPassword,onBlur:e=>h.focusPassword=!1,class:"input-box",maxlength:"20",placeholder:"请输入"+("weak"==o.config.passwordStrength?"6":"8")+"-16位密码",type:"password",modelValue:h.formData.password,"onUpdate:modelValue":e=>h.formData.password=e,trim:"both"},null,8,["focus","onBlur","placeholder","modelValue","onUpdate:modelValue"])])),_:1},8,["modelValue","onUpdate:modelValue"]),t.createVNode(_,{name:"password2",modelValue:h.formData.password2,"onUpdate:modelValue":e=>h.formData.password2=e,required:""},{default:t.withCtx((()=>[t.createVNode(D,{inputBorder:!1,focus:h.focusPassword2,onBlur:e=>h.focusPassword2=!1,class:"input-box",placeholder:"再次输入密码",maxlength:"20",type:"password",modelValue:h.formData.password2,"onUpdate:modelValue":e=>h.formData.password2=e,trim:"both"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])])),_:1},8,["modelValue","onUpdate:modelValue"]),t.createVNode(_,null,{default:t.withCtx((()=>[t.createVNode(b,{ref:"captcha",scene:"register",modelValue:h.formData.captcha,"onUpdate:modelValue":e=>h.formData.captcha=e},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),t.createVNode(B,{scope:"register",ref:"agreements"},null,512),t.createVNode(U,{class:"uni-btn",type:"primary",onClick:w.submit},{default:t.withCtx((()=>[t.createTextVNode("注册")])),_:1},8,["onClick"]),t.createVNode(U,{onClick:w.navigateBack,class:"register-back"},{default:t.withCtx((()=>[t.createTextVNode("返回")])),_:1},8,["onClick"]),t.createVNode(x,{"min-width":690},{default:t.withCtx((()=>[t.createVNode(C,{class:"link-box"},{default:t.withCtx((()=>[t.createVNode(N,{class:"link",onClick:w.registerByEmail},{default:t.withCtx((()=>[t.createTextVNode("邮箱验证码注册")])),_:1},8,["onClick"]),t.createVNode(N,{class:"link",onClick:w.toLogin},{default:t.withCtx((()=>[t.createTextVNode("已有账号？点此登录")])),_:1},8,["onClick"])])),_:1})])),_:1})];a(m.ssrRenderComponent(_,{name:"username",required:""},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createVNode(D,{inputBorder:!1,focus:h.focusUsername,onBlur:e=>h.focusUsername=!1,class:"input-box",placeholder:"请输入用户名",modelValue:h.formData.username,"onUpdate:modelValue":e=>h.formData.username=e,trim:"both"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])];o(m.ssrRenderComponent(D,{inputBorder:!1,focus:h.focusUsername,onBlur:e=>h.focusUsername=!1,class:"input-box",placeholder:"请输入用户名",modelValue:h.formData.username,"onUpdate:modelValue":e=>h.formData.username=e,trim:"both"},null,a,r))})),_:1},r,s)),a(m.ssrRenderComponent(_,{name:"nickname"},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createVNode(D,{inputBorder:!1,focus:h.focusNickname,onBlur:e=>h.focusNickname=!1,class:"input-box",placeholder:"请输入用户昵称",modelValue:h.formData.nickname,"onUpdate:modelValue":e=>h.formData.nickname=e,trim:"both"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])];o(m.ssrRenderComponent(D,{inputBorder:!1,focus:h.focusNickname,onBlur:e=>h.focusNickname=!1,class:"input-box",placeholder:"请输入用户昵称",modelValue:h.formData.nickname,"onUpdate:modelValue":e=>h.formData.nickname=e,trim:"both"},null,a,r))})),_:1},r,s)),a(m.ssrRenderComponent(_,{name:"password",modelValue:h.formData.password,"onUpdate:modelValue":e=>h.formData.password=e,required:""},{default:t.withCtx(((e,a,r,s)=>{if(!a)return[t.createVNode(D,{inputBorder:!1,focus:h.focusPassword,onBlur:e=>h.focusPassword=!1,class:"input-box",maxlength:"20",placeholder:"请输入"+("weak"==o.config.passwordStrength?"6":"8")+"-16位密码",type:"password",modelValue:h.formData.password,"onUpdate:modelValue":e=>h.formData.password=e,trim:"both"},null,8,["focus","onBlur","placeholder","modelValue","onUpdate:modelValue"])];a(m.ssrRenderComponent(D,{inputBorder:!1,focus:h.focusPassword,onBlur:e=>h.focusPassword=!1,class:"input-box",maxlength:"20",placeholder:"请输入"+("weak"==o.config.passwordStrength?"6":"8")+"-16位密码",type:"password",modelValue:h.formData.password,"onUpdate:modelValue":e=>h.formData.password=e,trim:"both"},null,r,s))})),_:1},r,s)),a(m.ssrRenderComponent(_,{name:"password2",modelValue:h.formData.password2,"onUpdate:modelValue":e=>h.formData.password2=e,required:""},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createVNode(D,{inputBorder:!1,focus:h.focusPassword2,onBlur:e=>h.focusPassword2=!1,class:"input-box",placeholder:"再次输入密码",maxlength:"20",type:"password",modelValue:h.formData.password2,"onUpdate:modelValue":e=>h.formData.password2=e,trim:"both"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])];o(m.ssrRenderComponent(D,{inputBorder:!1,focus:h.focusPassword2,onBlur:e=>h.focusPassword2=!1,class:"input-box",placeholder:"再次输入密码",maxlength:"20",type:"password",modelValue:h.formData.password2,"onUpdate:modelValue":e=>h.formData.password2=e,trim:"both"},null,a,r))})),_:1},r,s)),a(m.ssrRenderComponent(_,null,{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createVNode(b,{ref:"captcha",scene:"register",modelValue:h.formData.captcha,"onUpdate:modelValue":e=>h.formData.captcha=e},null,8,["modelValue","onUpdate:modelValue"])];o(m.ssrRenderComponent(b,{ref:"captcha",scene:"register",modelValue:h.formData.captcha,"onUpdate:modelValue":e=>h.formData.captcha=e},null,a,r))})),_:1},r,s)),a(m.ssrRenderComponent(B,{scope:"register",ref:"agreements"},null,r,s)),a(m.ssrRenderComponent(U,{class:"uni-btn",type:"primary",onClick:w.submit},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createTextVNode("注册")];o("注册")})),_:1},r,s)),a(m.ssrRenderComponent(U,{onClick:w.navigateBack,class:"register-back"},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createTextVNode("返回")];o("返回")})),_:1},r,s)),a(m.ssrRenderComponent(x,{"min-width":690},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createVNode(C,{class:"link-box"},{default:t.withCtx((()=>[t.createVNode(N,{class:"link",onClick:w.registerByEmail},{default:t.withCtx((()=>[t.createTextVNode("邮箱验证码注册")])),_:1},8,["onClick"]),t.createVNode(N,{class:"link",onClick:w.toLogin},{default:t.withCtx((()=>[t.createTextVNode("已有账号？点此登录")])),_:1},8,["onClick"])])),_:1})];o(m.ssrRenderComponent(C,{class:"link-box"},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createVNode(N,{class:"link",onClick:w.registerByEmail},{default:t.withCtx((()=>[t.createTextVNode("邮箱验证码注册")])),_:1},8,["onClick"]),t.createVNode(N,{class:"link",onClick:w.toLogin},{default:t.withCtx((()=>[t.createTextVNode("已有账号？点此登录")])),_:1},8,["onClick"])];o(m.ssrRenderComponent(N,{class:"link",onClick:w.registerByEmail},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createTextVNode("邮箱验证码注册")];o("邮箱验证码注册")})),_:1},a,r)),o(m.ssrRenderComponent(N,{class:"link",onClick:w.toLogin},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createTextVNode("已有账号？点此登录")];o("已有账号？点此登录")})),_:1},a,r))})),_:1},a,r))})),_:1},r,s))})),_:1},r,s))})),_:1},c))}],["__scopeId","data-v-6cd67c03"]]);exports.default=h;
