"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("@dcloudio/uni-h5"),o=require("./uni-id-pages-agreements.9JZ6pWUW.js"),n=require("vue"),t=require("@dcloudio/uni-app"),i=require("./uni-easyinput.C_oEcPLw.js"),r=require("./uni-id-pages-fab-login.CMCjf1RO.js"),s=require("../entry-server.js"),l=require("./login-page.mixin.BWGCa6Ap.js"),a=require("./_plugin-vue_export-helper.BDcHAK_d.js");require("./uni-popup.B_u0Fe_N.js"),require("./uni-popup-dialog.BiXp_EP-.js"),require("@dcloudio/uni-i18n"),require("./uni-icons.DF9TZjrB.js"),require("@dcloudio/uni-cloud"),require("./store.Cv4WGu-a.js"),require("vue-i18n"),require("@vue/server-renderer"),require("@dcloudio/uni-shared"),require("@vue/shared");const u={mixins:[l.mixin],data:()=>({type:"",phone:"",focusPhone:!1,logo:"/static/logo.png"}),computed:{loginTypes:async()=>s.config$1.loginTypes,isPhone(){return/^1\d{10}$/.test(this.phone)},imgSrc(){return{weixin:"/uni_modules/uni-id-pages/static/login/weixin.png",apple:"/uni_modules/uni-id-pages/static/app/apple.png",huawei:"/uni_modules/uni-id-pages/static/login/huawei.png",huaweiMobile:"/uni_modules/uni-id-pages/static/login/huawei-mobile.png"}[this.type]}},async onLoad(o){let n=o.type||s.config$1.loginTypes[0];this.type=n,"univerify"!=n&&(this.focusPhone=!0),this.$nextTick((()=>{["weixin","apple","huawei","huaweiMobile"].includes(n)&&(this.$refs.uniFabLogin.servicesList=this.$refs.uniFabLogin.servicesList.filter((e=>e.id!=n)))})),e.$on("uni-id-pages-setLoginType",(e=>{this.type=e}))},onShow(){document.onkeydown=e=>{var o=e||window.event;o&&13==o.keyCode&&this.toSmsPage()}},onUnload(){e.$off("uni-id-pages-setLoginType")},onReady(){},methods:{showCurrentWebview(){undefined.setStyle({top:0})},showAgreementModal(){this.$refs.agreements.popup()},quickLogin(e){var o,n;let t={};console.log(e),(null==(o=e.detail)?void 0:o.code)&&(t.phoneNumberCode=e.detail.code),("weixinMobile"!==this.type&&"huaweiMobile"!==this.type||(null==(n=e.detail)?void 0:n.code))&&this.$refs.uniFabLogin.login_before(this.type,!0,t)},toSmsPage(){return this.isPhone?this.needAgreements&&!this.agree?this.$refs.agreements.popup(this.toSmsPage):void e.navigateTo({url:"/uni_modules/uni-id-pages/pages/login/login-smscode?phoneNumber="+this.phone}):(this.focusPhone=!0,e.showToast({title:"手机号码格式不正确",icon:"none",duration:3e3}))},toPwdLogin(){e.navigateTo({url:"../login/password"})},chooseArea(){e.showToast({title:"暂不支持其他国家",icon:"none",duration:3e3})}}};const c=u.setup;u.setup=(e,o)=>{const t=n.useSSRContext();return(t.modules||(t.modules=new Set)).add("uni_modules/uni-id-pages/pages/login/login-withoutpwd.vue"),c?c(e,o):void 0};const d=a._export_sfc(u,[["ssrRender",function(s,l,u,c,d,p,m,h){const g=e.View,x=e.Image,y=e.Text,f=e.Button,w=t.resolveEasycom(n.resolveDynamicComponent("uni-id-pages-agreements"),o.__easycom_7),C=t.resolveEasycom(n.resolveDynamicComponent("uni-easyinput"),i.__easycom_6),k=t.resolveEasycom(n.resolveDynamicComponent("uni-id-pages-fab-login"),r.__easycom_9);l(a.ssrRenderComponent(g,n.mergeProps({class:"uni-content"},c),{default:n.withCtx(((e,o,t,i)=>{if(!o)return[n.createVNode(g,{class:"login-logo"},{default:n.withCtx((()=>[n.createVNode(x,{src:m.logo},null,8,["src"])])),_:1}),n.createVNode(y,{class:"title"},{default:n.withCtx((()=>[n.createTextVNode("请选择登录方式")])),_:1}),["apple","weixin","weixinMobile","huawei","huaweiMobile"].includes(m.type)?(n.openBlock(),n.createBlock(n.Fragment,{key:0},[n.createVNode(y,{class:"tip"},{default:n.withCtx((()=>[n.createTextVNode("将根据第三方账号服务平台的授权范围获取你的信息")])),_:1}),n.createVNode(g,{class:"quickLogin"},{default:n.withCtx((()=>["weixinMobile"!==m.type&&"huaweiMobile"!==m.type?(n.openBlock(),n.createBlock(x,{key:0,onClick:h.quickLogin,src:h.imgSrc,mode:"widthFix",class:"quickLoginBtn"},null,8,["onClick","src"])):(n.openBlock(),n.createBlock(g,{key:1,style:{position:"relative"}},{default:n.withCtx((()=>["weixinMobile"===m.type?(n.openBlock(),n.createBlock(f,{key:0,type:"primary","open-type":"getPhoneNumber",onGetphonenumber:h.quickLogin,class:"uni-btn"},{default:n.withCtx((()=>[n.createTextVNode("微信授权手机号登录")])),_:1},8,["onGetphonenumber"])):n.createCommentVNode("",!0),this.needAgreements&&!this.agree?(n.openBlock(),n.createBlock(g,{key:1,class:"mobile-login-agreement-layer",onClick:h.showAgreementModal},null,8,["onClick"])):n.createCommentVNode("",!0)])),_:1})),n.createVNode(w,{scope:"register",ref:"agreements"},null,512)])),_:1})],64)):(n.openBlock(),n.createBlock(n.Fragment,{key:1},[n.createVNode(y,{class:"tip"},{default:n.withCtx((()=>[n.createTextVNode("未注册的账号验证通过后将自动注册")])),_:1}),n.createVNode(g,{class:"phone-box"},{default:n.withCtx((()=>[n.createVNode(g,{onClick:h.chooseArea,class:"area"},{default:n.withCtx((()=>[n.createTextVNode("+86")])),_:1},8,["onClick"]),n.createVNode(C,{trim:"both",focus:m.focusPhone,onBlur:e=>m.focusPhone=!1,class:"input-box",type:"number",inputBorder:!1,modelValue:m.phone,"onUpdate:modelValue":e=>m.phone=e,maxlength:"11",placeholder:"请输入手机号"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])])),_:1}),n.createVNode(w,{scope:"register",ref:"agreements"},null,512),n.createVNode(f,{class:"uni-btn",type:"primary",onClick:h.toSmsPage},{default:n.withCtx((()=>[n.createTextVNode("获取验证码")])),_:1},8,["onClick"])],64)),n.createVNode(k,{ref:"uniFabLogin"},null,512)];o(a.ssrRenderComponent(g,{class:"login-logo"},{default:n.withCtx(((e,o,t,i)=>{if(!o)return[n.createVNode(x,{src:m.logo},null,8,["src"])];o(a.ssrRenderComponent(x,{src:m.logo},null,t,i))})),_:1},t,i)),o(a.ssrRenderComponent(y,{class:"title"},{default:n.withCtx(((e,o,t,i)=>{if(!o)return[n.createTextVNode("请选择登录方式")];o("请选择登录方式")})),_:1},t,i)),["apple","weixin","weixinMobile","huawei","huaweiMobile"].includes(m.type)?(o("\x3c!--[--\x3e"),o(a.ssrRenderComponent(y,{class:"tip"},{default:n.withCtx(((e,o,t,i)=>{if(!o)return[n.createTextVNode("将根据第三方账号服务平台的授权范围获取你的信息")];o("将根据第三方账号服务平台的授权范围获取你的信息")})),_:1},t,i)),o(a.ssrRenderComponent(g,{class:"quickLogin"},{default:n.withCtx(((e,o,t,i)=>{if(!o)return["weixinMobile"!==m.type&&"huaweiMobile"!==m.type?(n.openBlock(),n.createBlock(x,{key:0,onClick:h.quickLogin,src:h.imgSrc,mode:"widthFix",class:"quickLoginBtn"},null,8,["onClick","src"])):(n.openBlock(),n.createBlock(g,{key:1,style:{position:"relative"}},{default:n.withCtx((()=>["weixinMobile"===m.type?(n.openBlock(),n.createBlock(f,{key:0,type:"primary","open-type":"getPhoneNumber",onGetphonenumber:h.quickLogin,class:"uni-btn"},{default:n.withCtx((()=>[n.createTextVNode("微信授权手机号登录")])),_:1},8,["onGetphonenumber"])):n.createCommentVNode("",!0),this.needAgreements&&!this.agree?(n.openBlock(),n.createBlock(g,{key:1,class:"mobile-login-agreement-layer",onClick:h.showAgreementModal},null,8,["onClick"])):n.createCommentVNode("",!0)])),_:1})),n.createVNode(w,{scope:"register",ref:"agreements"},null,512)];"weixinMobile"!==m.type&&"huaweiMobile"!==m.type?o(a.ssrRenderComponent(x,{onClick:h.quickLogin,src:h.imgSrc,mode:"widthFix",class:"quickLoginBtn"},null,t,i)):o(a.ssrRenderComponent(g,{style:{position:"relative"}},{default:n.withCtx(((e,o,t,i)=>{if(!o)return["weixinMobile"===m.type?(n.openBlock(),n.createBlock(f,{key:0,type:"primary","open-type":"getPhoneNumber",onGetphonenumber:h.quickLogin,class:"uni-btn"},{default:n.withCtx((()=>[n.createTextVNode("微信授权手机号登录")])),_:1},8,["onGetphonenumber"])):n.createCommentVNode("",!0),this.needAgreements&&!this.agree?(n.openBlock(),n.createBlock(g,{key:1,class:"mobile-login-agreement-layer",onClick:h.showAgreementModal},null,8,["onClick"])):n.createCommentVNode("",!0)];"weixinMobile"===m.type?o(a.ssrRenderComponent(f,{type:"primary","open-type":"getPhoneNumber",onGetphonenumber:h.quickLogin,class:"uni-btn"},{default:n.withCtx(((e,o,t,i)=>{if(!o)return[n.createTextVNode("微信授权手机号登录")];o("微信授权手机号登录")})),_:1},t,i)):o("\x3c!----\x3e"),this.needAgreements&&!this.agree?o(a.ssrRenderComponent(g,{class:"mobile-login-agreement-layer",onClick:h.showAgreementModal},null,t,i)):o("\x3c!----\x3e")})),_:1},t,i)),o(a.ssrRenderComponent(w,{scope:"register",ref:"agreements"},null,t,i))})),_:1},t,i)),o("\x3c!--]--\x3e")):(o("\x3c!--[--\x3e"),o(a.ssrRenderComponent(y,{class:"tip"},{default:n.withCtx(((e,o,t,i)=>{if(!o)return[n.createTextVNode("未注册的账号验证通过后将自动注册")];o("未注册的账号验证通过后将自动注册")})),_:1},t,i)),o(a.ssrRenderComponent(g,{class:"phone-box"},{default:n.withCtx(((e,o,t,i)=>{if(!o)return[n.createVNode(g,{onClick:h.chooseArea,class:"area"},{default:n.withCtx((()=>[n.createTextVNode("+86")])),_:1},8,["onClick"]),n.createVNode(C,{trim:"both",focus:m.focusPhone,onBlur:e=>m.focusPhone=!1,class:"input-box",type:"number",inputBorder:!1,modelValue:m.phone,"onUpdate:modelValue":e=>m.phone=e,maxlength:"11",placeholder:"请输入手机号"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])];o(a.ssrRenderComponent(g,{onClick:h.chooseArea,class:"area"},{default:n.withCtx(((e,o,t,i)=>{if(!o)return[n.createTextVNode("+86")];o("+86")})),_:1},t,i)),o(a.ssrRenderComponent(C,{trim:"both",focus:m.focusPhone,onBlur:e=>m.focusPhone=!1,class:"input-box",type:"number",inputBorder:!1,modelValue:m.phone,"onUpdate:modelValue":e=>m.phone=e,maxlength:"11",placeholder:"请输入手机号"},null,t,i))})),_:1},t,i)),o(a.ssrRenderComponent(w,{scope:"register",ref:"agreements"},null,t,i)),o(a.ssrRenderComponent(f,{class:"uni-btn",type:"primary",onClick:h.toSmsPage},{default:n.withCtx(((e,o,t,i)=>{if(!o)return[n.createTextVNode("获取验证码")];o("获取验证码")})),_:1},t,i)),o("\x3c!--]--\x3e")),o(a.ssrRenderComponent(k,{ref:"uniFabLogin"},null,t,i))})),_:1},u))}],["__scopeId","data-v-d9f6aceb"]]);exports.default=d;
