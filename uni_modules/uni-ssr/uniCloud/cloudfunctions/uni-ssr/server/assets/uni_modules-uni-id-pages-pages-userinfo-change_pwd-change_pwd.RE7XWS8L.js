"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("@dcloudio/uni-h5"),o=require("@dcloudio/uni-cloud"),s=require("./uni-match-media.-lgn3PGo.js"),r=require("vue"),a=require("@dcloudio/uni-app"),t=require("./uni-forms.CJ4dDWzJ.js"),d=require("./uni-forms-item.D3d2HZ7Y.js"),l=require("./uni-easyinput.C_oEcPLw.js"),n=require("./login-page.mixin.BWGCa6Ap.js"),u=require("./password.BqUPu9Pe.js"),c=require("./_plugin-vue_export-helper.BDcHAK_d.js");require("./uni-icons.DF9TZjrB.js"),require("./store.Cv4WGu-a.js"),require("../entry-server.js"),require("vue-i18n"),require("@vue/server-renderer"),require("@dcloudio/uni-shared"),require("@vue/shared");const i=o.importObject("uni-id-co",{customUI:!0}),w={mixins:[n.mixin],data:()=>({focusOldPassword:!1,focusNewPassword:!1,focusNewPassword2:!1,formData:{oldPassword:"",newPassword:"",newPassword2:""},rules:{oldPassword:{rules:[{required:!0,errorMessage:"请输入新密码"},{pattern:/^.{6,20}$/,errorMessage:"密码为6 - 20位"}]},...u.passwordMod.getPwdRules("newPassword","newPassword2")},logo:"/static/logo.png"}),onReady(){this.$refs.form.setRules(this.rules)},onShow(){document.onkeydown=e=>{var o=e||window.event;o&&13==o.keyCode&&this.submit()}},methods:{submit(){this.$refs.form.validate().then((o=>{let{oldPassword:s,newPassword:r}=this.formData;i.updatePwd({oldPassword:s,newPassword:r}).then((o=>{e.removeStorageSync("uni_id_token"),e.setStorageSync("uni_id_token_expired",0),e.redirectTo({url:"/uni_modules/uni-id-pages/pages/login/login-withpwd"})})).catch((o=>{e.showModal({content:o.message,showCancel:!1})}))})).catch((e=>{let o=e[0].key;o=o.replace(o[0],o[0].toUpperCase()),this["focus"+o]=!0}))}}};const m=w.setup;w.setup=(e,o)=>{const s=r.useSSRContext();return(s.modules||(s.modules=new Set)).add("uni_modules/uni-id-pages/pages/userinfo/change_pwd/change_pwd.vue"),m?m(e,o):void 0};const p=c._export_sfc(w,[["ssrRender",function(o,n,u,i,w,m,p,f){const V=e.View,P=a.resolveEasycom(r.resolveDynamicComponent("uni-match-media"),s.__easycom_1),h=e.Image,x=e.Text,C=a.resolveEasycom(r.resolveDynamicComponent("uni-forms"),t.__easycom_4),N=a.resolveEasycom(r.resolveDynamicComponent("uni-forms-item"),d.__easycom_5),_=a.resolveEasycom(r.resolveDynamicComponent("uni-easyinput"),l.__easycom_6),y=e.Button;n(c.ssrRenderComponent(V,r.mergeProps({class:"uni-content"},i),{default:r.withCtx(((e,o,s,a)=>{if(!o)return[r.createVNode(P,{"min-width":690},{default:r.withCtx((()=>[r.createVNode(V,{class:"login-logo"},{default:r.withCtx((()=>[r.createVNode(h,{src:p.logo},null,8,["src"])])),_:1}),r.createVNode(x,{class:"title title-box"},{default:r.withCtx((()=>[r.createTextVNode("修改密码")])),_:1})])),_:1}),r.createVNode(C,{ref:"form",value:p.formData,"err-show-type":"toast"},{default:r.withCtx((()=>[r.createVNode(N,{name:"oldPassword"},{default:r.withCtx((()=>[r.createVNode(_,{focus:p.focusOldPassword,onBlur:e=>p.focusOldPassword=!1,class:"input-box",type:"password",inputBorder:!1,modelValue:p.formData.oldPassword,"onUpdate:modelValue":e=>p.formData.oldPassword=e,placeholder:"请输入旧密码"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])])),_:1}),r.createVNode(N,{name:"newPassword"},{default:r.withCtx((()=>[r.createVNode(_,{focus:p.focusNewPassword,onBlur:e=>p.focusNewPassword=!1,class:"input-box",type:"password",inputBorder:!1,modelValue:p.formData.newPassword,"onUpdate:modelValue":e=>p.formData.newPassword=e,placeholder:"请输入新密码"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])])),_:1}),r.createVNode(N,{name:"newPassword2"},{default:r.withCtx((()=>[r.createVNode(_,{focus:p.focusNewPassword2,onBlur:e=>p.focusNewPassword2=!1,class:"input-box",type:"password",inputBorder:!1,modelValue:p.formData.newPassword2,"onUpdate:modelValue":e=>p.formData.newPassword2=e,placeholder:"请再次输入新密码"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])])),_:1}),r.createVNode(y,{class:"uni-btn send-btn-box",type:"primary",onClick:f.submit},{default:r.withCtx((()=>[r.createTextVNode("提交")])),_:1},8,["onClick"])])),_:1},8,["value"])];o(c.ssrRenderComponent(P,{"min-width":690},{default:r.withCtx(((e,o,s,a)=>{if(!o)return[r.createVNode(V,{class:"login-logo"},{default:r.withCtx((()=>[r.createVNode(h,{src:p.logo},null,8,["src"])])),_:1}),r.createVNode(x,{class:"title title-box"},{default:r.withCtx((()=>[r.createTextVNode("修改密码")])),_:1})];o(c.ssrRenderComponent(V,{class:"login-logo"},{default:r.withCtx(((e,o,s,a)=>{if(!o)return[r.createVNode(h,{src:p.logo},null,8,["src"])];o(c.ssrRenderComponent(h,{src:p.logo},null,s,a))})),_:1},s,a)),o(c.ssrRenderComponent(x,{class:"title title-box"},{default:r.withCtx(((e,o,s,a)=>{if(!o)return[r.createTextVNode("修改密码")];o("修改密码")})),_:1},s,a))})),_:1},s,a)),o(c.ssrRenderComponent(C,{ref:"form",value:p.formData,"err-show-type":"toast"},{default:r.withCtx(((e,o,s,a)=>{if(!o)return[r.createVNode(N,{name:"oldPassword"},{default:r.withCtx((()=>[r.createVNode(_,{focus:p.focusOldPassword,onBlur:e=>p.focusOldPassword=!1,class:"input-box",type:"password",inputBorder:!1,modelValue:p.formData.oldPassword,"onUpdate:modelValue":e=>p.formData.oldPassword=e,placeholder:"请输入旧密码"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])])),_:1}),r.createVNode(N,{name:"newPassword"},{default:r.withCtx((()=>[r.createVNode(_,{focus:p.focusNewPassword,onBlur:e=>p.focusNewPassword=!1,class:"input-box",type:"password",inputBorder:!1,modelValue:p.formData.newPassword,"onUpdate:modelValue":e=>p.formData.newPassword=e,placeholder:"请输入新密码"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])])),_:1}),r.createVNode(N,{name:"newPassword2"},{default:r.withCtx((()=>[r.createVNode(_,{focus:p.focusNewPassword2,onBlur:e=>p.focusNewPassword2=!1,class:"input-box",type:"password",inputBorder:!1,modelValue:p.formData.newPassword2,"onUpdate:modelValue":e=>p.formData.newPassword2=e,placeholder:"请再次输入新密码"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])])),_:1}),r.createVNode(y,{class:"uni-btn send-btn-box",type:"primary",onClick:f.submit},{default:r.withCtx((()=>[r.createTextVNode("提交")])),_:1},8,["onClick"])];o(c.ssrRenderComponent(N,{name:"oldPassword"},{default:r.withCtx(((e,o,s,a)=>{if(!o)return[r.createVNode(_,{focus:p.focusOldPassword,onBlur:e=>p.focusOldPassword=!1,class:"input-box",type:"password",inputBorder:!1,modelValue:p.formData.oldPassword,"onUpdate:modelValue":e=>p.formData.oldPassword=e,placeholder:"请输入旧密码"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])];o(c.ssrRenderComponent(_,{focus:p.focusOldPassword,onBlur:e=>p.focusOldPassword=!1,class:"input-box",type:"password",inputBorder:!1,modelValue:p.formData.oldPassword,"onUpdate:modelValue":e=>p.formData.oldPassword=e,placeholder:"请输入旧密码"},null,s,a))})),_:1},s,a)),o(c.ssrRenderComponent(N,{name:"newPassword"},{default:r.withCtx(((e,o,s,a)=>{if(!o)return[r.createVNode(_,{focus:p.focusNewPassword,onBlur:e=>p.focusNewPassword=!1,class:"input-box",type:"password",inputBorder:!1,modelValue:p.formData.newPassword,"onUpdate:modelValue":e=>p.formData.newPassword=e,placeholder:"请输入新密码"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])];o(c.ssrRenderComponent(_,{focus:p.focusNewPassword,onBlur:e=>p.focusNewPassword=!1,class:"input-box",type:"password",inputBorder:!1,modelValue:p.formData.newPassword,"onUpdate:modelValue":e=>p.formData.newPassword=e,placeholder:"请输入新密码"},null,s,a))})),_:1},s,a)),o(c.ssrRenderComponent(N,{name:"newPassword2"},{default:r.withCtx(((e,o,s,a)=>{if(!o)return[r.createVNode(_,{focus:p.focusNewPassword2,onBlur:e=>p.focusNewPassword2=!1,class:"input-box",type:"password",inputBorder:!1,modelValue:p.formData.newPassword2,"onUpdate:modelValue":e=>p.formData.newPassword2=e,placeholder:"请再次输入新密码"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])];o(c.ssrRenderComponent(_,{focus:p.focusNewPassword2,onBlur:e=>p.focusNewPassword2=!1,class:"input-box",type:"password",inputBorder:!1,modelValue:p.formData.newPassword2,"onUpdate:modelValue":e=>p.formData.newPassword2=e,placeholder:"请再次输入新密码"},null,s,a))})),_:1},s,a)),o(c.ssrRenderComponent(y,{class:"uni-btn send-btn-box",type:"primary",onClick:f.submit},{default:r.withCtx(((e,o,s,a)=>{if(!o)return[r.createTextVNode("提交")];o("提交")})),_:1},s,a))})),_:1},s,a))})),_:1},u))}],["__scopeId","data-v-310f3ac4"]]);exports.default=p;
