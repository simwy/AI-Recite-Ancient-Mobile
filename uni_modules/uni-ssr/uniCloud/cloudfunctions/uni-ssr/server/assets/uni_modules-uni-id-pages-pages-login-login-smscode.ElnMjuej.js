"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("@dcloudio/uni-h5"),o=require("@dcloudio/uni-cloud"),t=require("./uni-forms.CJ4dDWzJ.js"),n=require("vue"),s=require("@dcloudio/uni-app"),r=require("./uni-id-pages-sms-form.BmxwzBZ8.js"),i=require("./uni-popup-captcha.aJ30TQep.js"),u=require("./login-page.mixin.BWGCa6Ap.js"),a=require("./_plugin-vue_export-helper.BDcHAK_d.js");require("./uni-captcha.5CORWJZL.js"),require("./uni-icons.DF9TZjrB.js"),require("./uni-easyinput.C_oEcPLw.js"),require("./uni-popup.B_u0Fe_N.js"),require("./store.Cv4WGu-a.js"),require("../entry-server.js"),require("vue-i18n"),require("@vue/server-renderer"),require("@dcloudio/uni-shared"),require("@vue/shared");const l={mixins:[u.mixin],data:()=>({code:"",phone:"",captcha:"",logo:"/static/logo.png"}),computed:{tipText(){return"验证码已通过短信发送至"+this.phone}},onLoad({phoneNumber:e}){this.phone=e},onShow(){document.onkeydown=e=>{var o=e||window.event;o&&13==o.keyCode&&this.submit()}},methods:{submit(){const t=o.importObject("uni-id-co",{errorOptions:{type:"toast"}});if(6!=this.code.length)return this.$refs.smsCode.focusSmsCodeInput=!0,e.showToast({title:"验证码不能为空",icon:"none",duration:3e3});t.loginBySms({mobile:this.phone,code:this.code,captcha:this.captcha}).then((e=>{this.loginSuccess(e)})).catch((e=>{"uni-id-captcha-required"==e.errCode?this.$refs.popup.open():console.log(e.errMsg)})).finally((e=>{this.captcha=""}))}}};const d=l.setup;l.setup=(e,o)=>{const t=n.useSSRContext();return(t.modules||(t.modules=new Set)).add("uni_modules/uni-id-pages/pages/login/login-smscode.vue"),d?d(e,o):void 0};const c=a._export_sfc(l,[["ssrRender",function(o,u,l,d,c,p,m,h){const C=e.View,f=e.Image,V=e.Text,g=s.resolveEasycom(n.resolveDynamicComponent("uni-forms"),t.__easycom_4),y=s.resolveEasycom(n.resolveDynamicComponent("uni-id-pages-sms-form"),r.__easycom_7),x=e.Button,_=s.resolveEasycom(n.resolveDynamicComponent("uni-popup-captcha"),i.__easycom_9);u(a.ssrRenderComponent(C,n.mergeProps({class:"uni-content"},d),{default:n.withCtx(((e,o,t,s)=>{if(!o)return[n.createVNode(C,{class:"login-logo"},{default:n.withCtx((()=>[n.createVNode(f,{src:m.logo},null,8,["src"])])),_:1}),n.createVNode(V,{class:"title"},{default:n.withCtx((()=>[n.createTextVNode("请输入验证码")])),_:1}),n.createVNode(V,{class:"tip"},{default:n.withCtx((()=>[n.createTextVNode("先输入图形验证码，再获取短信验证码")])),_:1}),n.createVNode(g,null,{default:n.withCtx((()=>[n.createVNode(y,{focusCaptchaInput:"",modelValue:m.code,"onUpdate:modelValue":e=>m.code=e,type:"login-by-sms",ref:"smsCode",phone:m.phone},null,8,["modelValue","onUpdate:modelValue","phone"]),n.createVNode(x,{class:"uni-btn send-btn",type:"primary",onClick:h.submit},{default:n.withCtx((()=>[n.createTextVNode("登录")])),_:1},8,["onClick"])])),_:1}),n.createVNode(_,{onConfirm:h.submit,modelValue:m.captcha,"onUpdate:modelValue":e=>m.captcha=e,scene:"login-by-sms",ref:"popup"},null,8,["onConfirm","modelValue","onUpdate:modelValue"])];o(a.ssrRenderComponent(C,{class:"login-logo"},{default:n.withCtx(((e,o,t,s)=>{if(!o)return[n.createVNode(f,{src:m.logo},null,8,["src"])];o(a.ssrRenderComponent(f,{src:m.logo},null,t,s))})),_:1},t,s)),o(a.ssrRenderComponent(V,{class:"title"},{default:n.withCtx(((e,o,t,s)=>{if(!o)return[n.createTextVNode("请输入验证码")];o("请输入验证码")})),_:1},t,s)),o(a.ssrRenderComponent(V,{class:"tip"},{default:n.withCtx(((e,o,t,s)=>{if(!o)return[n.createTextVNode("先输入图形验证码，再获取短信验证码")];o("先输入图形验证码，再获取短信验证码")})),_:1},t,s)),o(a.ssrRenderComponent(g,null,{default:n.withCtx(((e,o,t,s)=>{if(!o)return[n.createVNode(y,{focusCaptchaInput:"",modelValue:m.code,"onUpdate:modelValue":e=>m.code=e,type:"login-by-sms",ref:"smsCode",phone:m.phone},null,8,["modelValue","onUpdate:modelValue","phone"]),n.createVNode(x,{class:"uni-btn send-btn",type:"primary",onClick:h.submit},{default:n.withCtx((()=>[n.createTextVNode("登录")])),_:1},8,["onClick"])];o(a.ssrRenderComponent(y,{focusCaptchaInput:"",modelValue:m.code,"onUpdate:modelValue":e=>m.code=e,type:"login-by-sms",ref:"smsCode",phone:m.phone},null,t,s)),o(a.ssrRenderComponent(x,{class:"uni-btn send-btn",type:"primary",onClick:h.submit},{default:n.withCtx(((e,o,t,s)=>{if(!o)return[n.createTextVNode("登录")];o("登录")})),_:1},t,s))})),_:1},t,s)),o(a.ssrRenderComponent(_,{onConfirm:h.submit,modelValue:m.captcha,"onUpdate:modelValue":e=>m.captcha=e,scene:"login-by-sms",ref:"popup"},null,t,s))})),_:1},l))}],["__scopeId","data-v-93225fe2"]]);exports.default=c;
