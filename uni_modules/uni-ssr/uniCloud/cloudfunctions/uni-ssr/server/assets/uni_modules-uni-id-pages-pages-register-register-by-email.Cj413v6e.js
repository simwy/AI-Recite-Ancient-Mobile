"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("@dcloudio/uni-h5"),o=require("@dcloudio/uni-cloud"),a=require("./uni-match-media.-lgn3PGo.js"),t=require("vue"),r=require("@dcloudio/uni-app"),l=require("./uni-forms.CJ4dDWzJ.js"),s=require("./uni-forms-item.D3d2HZ7Y.js"),d=require("./uni-easyinput.C_oEcPLw.js"),n=require("./uni-id-pages-email-form.DBwQpGsl.js"),u=require("./uni-id-pages-agreements.9JZ6pWUW.js");require("./validator.CXP7XE2B.js");const i=require("./login-page.mixin.BWGCa6Ap.js"),m=require("./password.BqUPu9Pe.js"),c=require("./_plugin-vue_export-helper.BDcHAK_d.js");require("./uni-icons.DF9TZjrB.js"),require("./uni-captcha.5CORWJZL.js"),require("./uni-popup.B_u0Fe_N.js"),require("./uni-popup-dialog.BiXp_EP-.js"),require("@dcloudio/uni-i18n"),require("../entry-server.js"),require("vue-i18n"),require("@vue/server-renderer"),require("@dcloudio/uni-shared"),require("./store.Cv4WGu-a.js"),require("@vue/shared");const p=o.importObject("uni-id-co"),f={mixins:[i.mixin],data:()=>({formData:{email:"",nickname:"",password:"",password2:"",code:""},rules:{email:{rules:[{required:!0,errorMessage:"请输入邮箱"},{format:"email",errorMessage:"邮箱格式不正确"}]},nickname:{rules:[{minLength:3,maxLength:32,errorMessage:"昵称长度在 {minLength} 到 {maxLength} 个字符"},{validateFunction:function(e,o,a,t){return(/^1\d{10}$/.test(o)||/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(o))&&t("昵称不能是：手机号或邮箱"),/^\d+$/.test(o)&&t("昵称不能为纯数字"),/[\u4E00-\u9FA5\uF900-\uFA2D]{1,}/.test(o)&&t("昵称不能包含中文"),!0}}],label:"昵称"},...m.passwordMod.getPwdRules(),code:{rules:[{required:!0,errorMessage:"请输入邮箱验证码"},{pattern:/^.{6}$/,errorMessage:"邮箱验证码不正确"}]}},focusEmail:!1,focusNickname:!1,focusPassword:!1,focusPassword2:!1,logo:"/static/logo.png"}),onReady(){this.$refs.form.setRules(this.rules)},onShow(){document.onkeydown=e=>{var o=e||window.event;o&&13==o.keyCode&&this.submit()}},methods:{submit(){this.$refs.form.validate().then((e=>{if(this.needAgreements&&!this.agree)return this.$refs.agreements.popup((()=>{this.submitForm(e)}));this.submitForm(e)})).catch((e=>{let o=e[0].key;o=o.replace(o[0],o[0].toUpperCase()),this["focus"+o]=!0}))},submitForm(o){p.registerUserByEmail(this.formData).then((o=>{e.navigateTo({url:"/uni_modules/uni-id-pages/pages/login/login-withpwd",complete:e=>{}})})).catch((e=>{console.log(e.message)}))},navigateBack(){e.navigateBack()},toLogin(){e.navigateTo({url:"/uni_modules/uni-id-pages/pages/login/login-withpwd"})},registerByUserName(){e.navigateTo({url:"/uni_modules/uni-id-pages/pages/register/register"})}}};const V=f.setup;f.setup=(e,o)=>{const a=t.useSSRContext();return(a.modules||(a.modules=new Set)).add("uni_modules/uni-id-pages/pages/register/register-by-email.vue"),V?V(e,o):void 0};const w=c._export_sfc(f,[["ssrRender",function(o,i,m,p,f,V,w,h){const C=e.View,g=r.resolveEasycom(t.resolveDynamicComponent("uni-match-media"),a.__easycom_1),x=e.Image,N=e.Text,k=r.resolveEasycom(t.resolveDynamicComponent("uni-forms"),l.__easycom_4),_=r.resolveEasycom(t.resolveDynamicComponent("uni-forms-item"),s.__easycom_5),D=r.resolveEasycom(t.resolveDynamicComponent("uni-easyinput"),d.__easycom_6),b=r.resolveEasycom(t.resolveDynamicComponent("uni-id-pages-email-form"),n.__easycom_7),B=r.resolveEasycom(t.resolveDynamicComponent("uni-id-pages-agreements"),u.__easycom_7),y=e.Button;i(c.ssrRenderComponent(C,t.mergeProps({class:"uni-content"},p),{default:t.withCtx(((e,a,r,l)=>{if(!a)return[t.createVNode(g,{"min-width":690},{default:t.withCtx((()=>[t.createVNode(C,{class:"login-logo"},{default:t.withCtx((()=>[t.createVNode(x,{src:w.logo},null,8,["src"])])),_:1}),t.createVNode(N,{class:"title title-box"},{default:t.withCtx((()=>[t.createTextVNode("邮箱验证码注册")])),_:1})])),_:1}),t.createVNode(k,{ref:"form",value:w.formData,rules:w.rules,"validate-trigger":"submit","err-show-type":"toast"},{default:t.withCtx((()=>[t.createVNode(_,{name:"email",required:""},{default:t.withCtx((()=>[t.createVNode(D,{inputBorder:!1,focus:w.focusEmail,onBlur:e=>w.focusEmail=!1,class:"input-box",placeholder:"请输入邮箱",modelValue:w.formData.email,"onUpdate:modelValue":e=>w.formData.email=e,trim:"both"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])])),_:1}),t.createVNode(_,{name:"nickname"},{default:t.withCtx((()=>[t.createVNode(D,{inputBorder:!1,focus:w.focusNickname,onBlur:e=>w.focusNickname=!1,class:"input-box",placeholder:"请输入用户昵称",modelValue:w.formData.nickname,"onUpdate:modelValue":e=>w.formData.nickname=e,trim:"both"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])])),_:1}),t.createVNode(_,{name:"password",modelValue:w.formData.password,"onUpdate:modelValue":e=>w.formData.password=e,required:""},{default:t.withCtx((()=>[t.createVNode(D,{inputBorder:!1,focus:w.focusPassword,onBlur:e=>w.focusPassword=!1,class:"input-box",maxlength:"20",placeholder:"请输入"+("weak"==o.config.passwordStrength?"6":"8")+"-16位密码",type:"password",modelValue:w.formData.password,"onUpdate:modelValue":e=>w.formData.password=e,trim:"both"},null,8,["focus","onBlur","placeholder","modelValue","onUpdate:modelValue"])])),_:1},8,["modelValue","onUpdate:modelValue"]),t.createVNode(_,{name:"password2",modelValue:w.formData.password2,"onUpdate:modelValue":e=>w.formData.password2=e,required:""},{default:t.withCtx((()=>[t.createVNode(D,{inputBorder:!1,focus:w.focusPassword2,onBlur:e=>w.focusPassword2=!1,class:"input-box",placeholder:"再次输入密码",maxlength:"20",type:"password",modelValue:w.formData.password2,"onUpdate:modelValue":e=>w.formData.password2=e,trim:"both"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])])),_:1},8,["modelValue","onUpdate:modelValue"]),t.createVNode(_,{name:"code"},{default:t.withCtx((()=>[t.createVNode(b,{ref:"shortCode",email:w.formData.email,type:"register",modelValue:w.formData.code,"onUpdate:modelValue":e=>w.formData.code=e},null,8,["email","modelValue","onUpdate:modelValue"])])),_:1}),t.createVNode(B,{scope:"register",ref:"agreements"},null,512),t.createVNode(y,{class:"uni-btn",type:"primary",onClick:h.submit},{default:t.withCtx((()=>[t.createTextVNode("注册")])),_:1},8,["onClick"]),t.createVNode(y,{onClick:h.navigateBack,class:"register-back"},{default:t.withCtx((()=>[t.createTextVNode("返回")])),_:1},8,["onClick"]),t.createVNode(g,{"min-width":690},{default:t.withCtx((()=>[t.createVNode(C,{class:"link-box"},{default:t.withCtx((()=>[t.createVNode(N,{class:"link",onClick:h.registerByUserName},{default:t.withCtx((()=>[t.createTextVNode("用户名密码注册")])),_:1},8,["onClick"]),t.createVNode(N,{class:"link",onClick:h.toLogin},{default:t.withCtx((()=>[t.createTextVNode("已有账号？点此登录")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["value","rules"])];a(c.ssrRenderComponent(g,{"min-width":690},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createVNode(C,{class:"login-logo"},{default:t.withCtx((()=>[t.createVNode(x,{src:w.logo},null,8,["src"])])),_:1}),t.createVNode(N,{class:"title title-box"},{default:t.withCtx((()=>[t.createTextVNode("邮箱验证码注册")])),_:1})];o(c.ssrRenderComponent(C,{class:"login-logo"},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createVNode(x,{src:w.logo},null,8,["src"])];o(c.ssrRenderComponent(x,{src:w.logo},null,a,r))})),_:1},a,r)),o(c.ssrRenderComponent(N,{class:"title title-box"},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createTextVNode("邮箱验证码注册")];o("邮箱验证码注册")})),_:1},a,r))})),_:1},r,l)),a(c.ssrRenderComponent(k,{ref:"form",value:w.formData,rules:w.rules,"validate-trigger":"submit","err-show-type":"toast"},{default:t.withCtx(((e,a,r,l)=>{if(!a)return[t.createVNode(_,{name:"email",required:""},{default:t.withCtx((()=>[t.createVNode(D,{inputBorder:!1,focus:w.focusEmail,onBlur:e=>w.focusEmail=!1,class:"input-box",placeholder:"请输入邮箱",modelValue:w.formData.email,"onUpdate:modelValue":e=>w.formData.email=e,trim:"both"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])])),_:1}),t.createVNode(_,{name:"nickname"},{default:t.withCtx((()=>[t.createVNode(D,{inputBorder:!1,focus:w.focusNickname,onBlur:e=>w.focusNickname=!1,class:"input-box",placeholder:"请输入用户昵称",modelValue:w.formData.nickname,"onUpdate:modelValue":e=>w.formData.nickname=e,trim:"both"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])])),_:1}),t.createVNode(_,{name:"password",modelValue:w.formData.password,"onUpdate:modelValue":e=>w.formData.password=e,required:""},{default:t.withCtx((()=>[t.createVNode(D,{inputBorder:!1,focus:w.focusPassword,onBlur:e=>w.focusPassword=!1,class:"input-box",maxlength:"20",placeholder:"请输入"+("weak"==o.config.passwordStrength?"6":"8")+"-16位密码",type:"password",modelValue:w.formData.password,"onUpdate:modelValue":e=>w.formData.password=e,trim:"both"},null,8,["focus","onBlur","placeholder","modelValue","onUpdate:modelValue"])])),_:1},8,["modelValue","onUpdate:modelValue"]),t.createVNode(_,{name:"password2",modelValue:w.formData.password2,"onUpdate:modelValue":e=>w.formData.password2=e,required:""},{default:t.withCtx((()=>[t.createVNode(D,{inputBorder:!1,focus:w.focusPassword2,onBlur:e=>w.focusPassword2=!1,class:"input-box",placeholder:"再次输入密码",maxlength:"20",type:"password",modelValue:w.formData.password2,"onUpdate:modelValue":e=>w.formData.password2=e,trim:"both"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])])),_:1},8,["modelValue","onUpdate:modelValue"]),t.createVNode(_,{name:"code"},{default:t.withCtx((()=>[t.createVNode(b,{ref:"shortCode",email:w.formData.email,type:"register",modelValue:w.formData.code,"onUpdate:modelValue":e=>w.formData.code=e},null,8,["email","modelValue","onUpdate:modelValue"])])),_:1}),t.createVNode(B,{scope:"register",ref:"agreements"},null,512),t.createVNode(y,{class:"uni-btn",type:"primary",onClick:h.submit},{default:t.withCtx((()=>[t.createTextVNode("注册")])),_:1},8,["onClick"]),t.createVNode(y,{onClick:h.navigateBack,class:"register-back"},{default:t.withCtx((()=>[t.createTextVNode("返回")])),_:1},8,["onClick"]),t.createVNode(g,{"min-width":690},{default:t.withCtx((()=>[t.createVNode(C,{class:"link-box"},{default:t.withCtx((()=>[t.createVNode(N,{class:"link",onClick:h.registerByUserName},{default:t.withCtx((()=>[t.createTextVNode("用户名密码注册")])),_:1},8,["onClick"]),t.createVNode(N,{class:"link",onClick:h.toLogin},{default:t.withCtx((()=>[t.createTextVNode("已有账号？点此登录")])),_:1},8,["onClick"])])),_:1})])),_:1})];a(c.ssrRenderComponent(_,{name:"email",required:""},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createVNode(D,{inputBorder:!1,focus:w.focusEmail,onBlur:e=>w.focusEmail=!1,class:"input-box",placeholder:"请输入邮箱",modelValue:w.formData.email,"onUpdate:modelValue":e=>w.formData.email=e,trim:"both"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])];o(c.ssrRenderComponent(D,{inputBorder:!1,focus:w.focusEmail,onBlur:e=>w.focusEmail=!1,class:"input-box",placeholder:"请输入邮箱",modelValue:w.formData.email,"onUpdate:modelValue":e=>w.formData.email=e,trim:"both"},null,a,r))})),_:1},r,l)),a(c.ssrRenderComponent(_,{name:"nickname"},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createVNode(D,{inputBorder:!1,focus:w.focusNickname,onBlur:e=>w.focusNickname=!1,class:"input-box",placeholder:"请输入用户昵称",modelValue:w.formData.nickname,"onUpdate:modelValue":e=>w.formData.nickname=e,trim:"both"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])];o(c.ssrRenderComponent(D,{inputBorder:!1,focus:w.focusNickname,onBlur:e=>w.focusNickname=!1,class:"input-box",placeholder:"请输入用户昵称",modelValue:w.formData.nickname,"onUpdate:modelValue":e=>w.formData.nickname=e,trim:"both"},null,a,r))})),_:1},r,l)),a(c.ssrRenderComponent(_,{name:"password",modelValue:w.formData.password,"onUpdate:modelValue":e=>w.formData.password=e,required:""},{default:t.withCtx(((e,a,r,l)=>{if(!a)return[t.createVNode(D,{inputBorder:!1,focus:w.focusPassword,onBlur:e=>w.focusPassword=!1,class:"input-box",maxlength:"20",placeholder:"请输入"+("weak"==o.config.passwordStrength?"6":"8")+"-16位密码",type:"password",modelValue:w.formData.password,"onUpdate:modelValue":e=>w.formData.password=e,trim:"both"},null,8,["focus","onBlur","placeholder","modelValue","onUpdate:modelValue"])];a(c.ssrRenderComponent(D,{inputBorder:!1,focus:w.focusPassword,onBlur:e=>w.focusPassword=!1,class:"input-box",maxlength:"20",placeholder:"请输入"+("weak"==o.config.passwordStrength?"6":"8")+"-16位密码",type:"password",modelValue:w.formData.password,"onUpdate:modelValue":e=>w.formData.password=e,trim:"both"},null,r,l))})),_:1},r,l)),a(c.ssrRenderComponent(_,{name:"password2",modelValue:w.formData.password2,"onUpdate:modelValue":e=>w.formData.password2=e,required:""},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createVNode(D,{inputBorder:!1,focus:w.focusPassword2,onBlur:e=>w.focusPassword2=!1,class:"input-box",placeholder:"再次输入密码",maxlength:"20",type:"password",modelValue:w.formData.password2,"onUpdate:modelValue":e=>w.formData.password2=e,trim:"both"},null,8,["focus","onBlur","modelValue","onUpdate:modelValue"])];o(c.ssrRenderComponent(D,{inputBorder:!1,focus:w.focusPassword2,onBlur:e=>w.focusPassword2=!1,class:"input-box",placeholder:"再次输入密码",maxlength:"20",type:"password",modelValue:w.formData.password2,"onUpdate:modelValue":e=>w.formData.password2=e,trim:"both"},null,a,r))})),_:1},r,l)),a(c.ssrRenderComponent(_,{name:"code"},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createVNode(b,{ref:"shortCode",email:w.formData.email,type:"register",modelValue:w.formData.code,"onUpdate:modelValue":e=>w.formData.code=e},null,8,["email","modelValue","onUpdate:modelValue"])];o(c.ssrRenderComponent(b,{ref:"shortCode",email:w.formData.email,type:"register",modelValue:w.formData.code,"onUpdate:modelValue":e=>w.formData.code=e},null,a,r))})),_:1},r,l)),a(c.ssrRenderComponent(B,{scope:"register",ref:"agreements"},null,r,l)),a(c.ssrRenderComponent(y,{class:"uni-btn",type:"primary",onClick:h.submit},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createTextVNode("注册")];o("注册")})),_:1},r,l)),a(c.ssrRenderComponent(y,{onClick:h.navigateBack,class:"register-back"},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createTextVNode("返回")];o("返回")})),_:1},r,l)),a(c.ssrRenderComponent(g,{"min-width":690},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createVNode(C,{class:"link-box"},{default:t.withCtx((()=>[t.createVNode(N,{class:"link",onClick:h.registerByUserName},{default:t.withCtx((()=>[t.createTextVNode("用户名密码注册")])),_:1},8,["onClick"]),t.createVNode(N,{class:"link",onClick:h.toLogin},{default:t.withCtx((()=>[t.createTextVNode("已有账号？点此登录")])),_:1},8,["onClick"])])),_:1})];o(c.ssrRenderComponent(C,{class:"link-box"},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createVNode(N,{class:"link",onClick:h.registerByUserName},{default:t.withCtx((()=>[t.createTextVNode("用户名密码注册")])),_:1},8,["onClick"]),t.createVNode(N,{class:"link",onClick:h.toLogin},{default:t.withCtx((()=>[t.createTextVNode("已有账号？点此登录")])),_:1},8,["onClick"])];o(c.ssrRenderComponent(N,{class:"link",onClick:h.registerByUserName},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createTextVNode("用户名密码注册")];o("用户名密码注册")})),_:1},a,r)),o(c.ssrRenderComponent(N,{class:"link",onClick:h.toLogin},{default:t.withCtx(((e,o,a,r)=>{if(!o)return[t.createTextVNode("已有账号？点此登录")];o("已有账号？点此登录")})),_:1},a,r))})),_:1},a,r))})),_:1},r,l))})),_:1},r,l))})),_:1},m))}],["__scopeId","data-v-6451329b"]]);exports.default=w;
