"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("@dcloudio/uni-h5"),t=require("./uni-list-item.DbqdfHei.js"),n=require("vue"),o=require("@dcloudio/uni-app"),i=require("./store.Cv4WGu-a.js"),s=require("./_plugin-vue_export-helper.BDcHAK_d.js");function a(){var e=void 0;try{if("iOS"==plus.os.name){var t=0,n=plus.ios.invoke("UIApplication","sharedApplication"),o=plus.ios.invoke(n,"currentUserNotificationSettings");o?(t=o.plusGetAttribute("types"),plus.ios.deleteObject(o)):t=plus.ios.invoke(n,"enabledRemoteNotificationTypes"),plus.ios.deleteObject(n),e=0!=t}else{var i=plus.android.runtimeMainActivity(),s=plus.android.invoke("com.igexin.sdk.PushManager","getInstance");e=plus.android.invoke(s,"isPushTurnedOn",i)}}catch(a){console.error("exception in isTurnedOnPush@dc-push!!")}return e}function r(){try{if("iOS"==plus.os.name){var e=plus.ios.invoke("UIApplication","sharedApplication"),t=plus.ios.invoke("NSURL","URLWithString:","app-settings:");plus.ios.invoke(e,"openURL:",t),plus.ios.deleteObject(t),plus.ios.deleteObject(e)}}catch(n){console.error("exception in settingInIos@dc-push!!")}}require("./uni-icons.DF9TZjrB.js"),require("@dcloudio/uni-cloud"),require("../entry-server.js"),require("vue-i18n"),require("@vue/server-renderer"),require("@dcloudio/uni-shared"),require("@vue/shared");const l={isOn:a,iosSetting:r,on:function(){try{if("iOS"==plus.os.name)a()||r();else{var e=plus.android.runtimeMainActivity(),t=plus.android.invoke("com.igexin.sdk.PushManager","getInstance");plus.android.invoke(t,"turnOnPush",e)}}catch(n){console.error("exception in turnOnPush@dc-push!!")}},off:function(){try{if("iOS"==plus.os.name);else{var e=plus.android.runtimeMainActivity(),t=plus.android.invoke("com.igexin.sdk.PushManager","getInstance");plus.android.invoke(t,"turnOffPush",e)}}catch(n){console.error("exception in trunOffPush@dc-push!!")}},setting:function(){"ios"==e.getSystemInfoSync().platform&&r(),"android"==e.getSystemInfoSync().platform&&function(){if("android"==e.getSystemInfoSync().platform){var t=plus.android.runtimeMainActivity(),n=new(plus.android.importClass("android.content.Intent"))(plus.android.importClass("android.provider.Settings").ACTION_APPLICATION_DETAILS_SETTINGS);t.startActivity(n)}}()}},c={data:()=>({pushServer:l,supportMode:[],pushIsOn:"wait",currentLanguage:"",userInfo:{}}),computed:{hasLogin:()=>i.store.hasLogin,i18nEnable:()=>e.getApp().globalData.config.i18n.enable},onLoad(){this.currentLanguage="en"==e.getStorageSync("CURRENT_LANG")?"English":"简体中文",e.setNavigationBarTitle({title:this.$t("settings.navigationBarTitle")})},onShow(){},methods:{async changeLoginState(){this.hasLogin?await i.mutations.logout():e.redirectTo({url:"/uni_modules/uni-id-pages/pages/login/login-withoutpwd"})},startSoterAuthentication(t){console.log(t);let n={fingerPrint:this.$t("settings.fingerPrint"),facial:this.$t("settings.facial")}[t];this.checkIsSoterEnrolledInDevice({checkAuthMode:t,title:n}).then((()=>{console.log(t,n),uni.startSoterAuthentication({requestAuthModes:[t],challenge:"123456",authContent:this.$t("settings.please")+` ${n}`,complete:e=>{console.log(e)},success:t=>{if(console.log(t),0==t.errCode)return e.showToast({title:`${n}`+this.$t("settings.successText"),icon:"none"});e.showToast({title:this.$t("settings.failTip"),icon:"none"})},fail:t=>{console.log(t),console.log(`认证失败:${t.errCode}`),e.showToast({title:this.$t("settings.authFailed"),icon:"none"})}})}))},checkIsSoterEnrolledInDevice({checkAuthMode:t,title:n}){return new Promise(((o,i)=>{uni.checkIsSoterEnrolledInDevice({checkAuthMode:t,success:t=>{if(console.log(t),t.isEnrolled)return o(t);e.showToast({title:this.$t("settings.deviceNoOpen")+`${n}`,icon:"none"}),i(t)},fail:t=>{console.log(t),e.showToast({title:`${n}`+this.$t("settings.fail"),icon:"none"}),i(t)}})}))},clearTmp(){e.showLoading({title:this.$t("settings.clearing"),mask:!0}),e.getSavedFileList({success:t=>{t.fileList.length>0?e.removeSavedFile({filePath:t.fileList[0].filePath,complete:t=>{console.log(t),e.hideLoading(),e.showToast({title:this.$t("settings.clearedSuccessed"),icon:"none"})}}):(e.hideLoading(),e.showToast({title:this.$t("settings.clearedSuccessed"),icon:"none"}))},complete:e=>{console.log(e)}})},changeLanguage(){console.log("语言切换"),e.showActionSheet({itemList:["English","简体中文"],success:t=>{console.log(t.tapIndex);let n=e.getStorageSync("CURRENT_LANG");if(!t.tapIndex&&"zh-Hans"==n||t.tapIndex&&"en"==n){const o=e.getApp().globalData;n=o.locale="en"===n?"zh-Hans":"en",e.setStorageSync("CURRENT_LANG",n),e.getApp().globalData.$i18n.locale=n,this.currentLanguage=t.tapIndex?"简体中文":"English",e.setLocale&&e.setLocale(n),e.reLaunch({url:"/pages/list/list",complete:()=>{e.$emit("changeLanguage",n)}})}},fail:()=>{},complete:()=>{}})}}};const u=c.setup;c.setup=(e,t)=>{const o=n.useSSRContext();return(o.modules||(o.modules=new Set)).add("pages/ucenter/settings/settings.vue"),u?u(e,t):void 0};const g=s._export_sfc(c,[["ssrRender",function(i,a,r,l,c,u,g,d){const p=e.View,h=o.resolveEasycom(n.resolveDynamicComponent("uni-list"),t.__easycom_1),m=o.resolveEasycom(n.resolveDynamicComponent("uni-list-item"),t.__easycom_2),f=e.Text;a(s.ssrRenderComponent(p,n.mergeProps({class:"content"},l),{default:n.withCtx(((e,t,o,a)=>{if(!t)return[n.createVNode(h,{class:"mt10",border:!1},{default:n.withCtx((()=>[n.createVNode(m,{title:i.$t("settings.userInfo"),to:"/uni_modules/uni-id-pages/pages/userinfo/userinfo",link:"navigateTo"},null,8,["title"]),g.userInfo.mobile?(n.openBlock(),n.createBlock(m,{key:0,title:i.$t("settings.changePassword"),to:"/pages/ucenter/login-page/pwd-retrieve/pwd-retrieve?phoneNumber="+g.userInfo.mobile,link:"navigateTo"},null,8,["title","to"])):n.createCommentVNode("",!0)])),_:1}),n.createVNode(h,{class:"mt10",border:!1},{default:n.withCtx((()=>[d.i18nEnable?(n.openBlock(),n.createBlock(m,{key:0,title:i.$t("settings.changeLanguage"),onClick:d.changeLanguage,rightText:g.currentLanguage,link:""},null,8,["title","onClick","rightText"])):n.createCommentVNode("",!0)])),_:1}),n.createVNode(p,{class:"bottom-back",onClick:d.changeLoginState},{default:n.withCtx((()=>[d.hasLogin?(n.openBlock(),n.createBlock(f,{key:0,class:"bottom-back-text"},{default:n.withCtx((()=>[n.createTextVNode(n.toDisplayString(i.$t("settings.logOut")),1)])),_:1})):(n.openBlock(),n.createBlock(f,{key:1,class:"bottom-back-text"},{default:n.withCtx((()=>[n.createTextVNode(n.toDisplayString(i.$t("settings.login")),1)])),_:1}))])),_:1},8,["onClick"])];t(s.ssrRenderComponent(h,{class:"mt10",border:!1},{default:n.withCtx(((e,t,o,a)=>{if(!t)return[n.createVNode(m,{title:i.$t("settings.userInfo"),to:"/uni_modules/uni-id-pages/pages/userinfo/userinfo",link:"navigateTo"},null,8,["title"]),g.userInfo.mobile?(n.openBlock(),n.createBlock(m,{key:0,title:i.$t("settings.changePassword"),to:"/pages/ucenter/login-page/pwd-retrieve/pwd-retrieve?phoneNumber="+g.userInfo.mobile,link:"navigateTo"},null,8,["title","to"])):n.createCommentVNode("",!0)];t(s.ssrRenderComponent(m,{title:i.$t("settings.userInfo"),to:"/uni_modules/uni-id-pages/pages/userinfo/userinfo",link:"navigateTo"},null,o,a)),g.userInfo.mobile?t(s.ssrRenderComponent(m,{title:i.$t("settings.changePassword"),to:"/pages/ucenter/login-page/pwd-retrieve/pwd-retrieve?phoneNumber="+g.userInfo.mobile,link:"navigateTo"},null,o,a)):t("\x3c!----\x3e")})),_:1},o,a)),t(s.ssrRenderComponent(h,{class:"mt10",border:!1},{default:n.withCtx(((e,t,o,a)=>{if(!t)return[d.i18nEnable?(n.openBlock(),n.createBlock(m,{key:0,title:i.$t("settings.changeLanguage"),onClick:d.changeLanguage,rightText:g.currentLanguage,link:""},null,8,["title","onClick","rightText"])):n.createCommentVNode("",!0)];d.i18nEnable?t(s.ssrRenderComponent(m,{title:i.$t("settings.changeLanguage"),onClick:d.changeLanguage,rightText:g.currentLanguage,link:""},null,o,a)):t("\x3c!----\x3e")})),_:1},o,a)),t(s.ssrRenderComponent(p,{class:"bottom-back",onClick:d.changeLoginState},{default:n.withCtx(((e,t,o,a)=>{if(!t)return[d.hasLogin?(n.openBlock(),n.createBlock(f,{key:0,class:"bottom-back-text"},{default:n.withCtx((()=>[n.createTextVNode(n.toDisplayString(i.$t("settings.logOut")),1)])),_:1})):(n.openBlock(),n.createBlock(f,{key:1,class:"bottom-back-text"},{default:n.withCtx((()=>[n.createTextVNode(n.toDisplayString(i.$t("settings.login")),1)])),_:1}))];d.hasLogin?t(s.ssrRenderComponent(f,{class:"bottom-back-text"},{default:n.withCtx(((e,t,o,a)=>{if(!t)return[n.createTextVNode(n.toDisplayString(i.$t("settings.logOut")),1)];t(`${s.ssrInterpolate(i.$t("settings.logOut"))}`)})),_:1},o,a)):t(s.ssrRenderComponent(f,{class:"bottom-back-text"},{default:n.withCtx(((e,t,o,a)=>{if(!t)return[n.createTextVNode(n.toDisplayString(i.$t("settings.login")),1)];t(`${s.ssrInterpolate(i.$t("settings.login"))}`)})),_:1},o,a))})),_:1},o,a))})),_:1},r))}],["__scopeId","data-v-80c43692"]]);exports.default=g;
