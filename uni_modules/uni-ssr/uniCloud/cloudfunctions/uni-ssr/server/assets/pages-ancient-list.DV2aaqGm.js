"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("@dcloudio/uni-h5"),t=require("@dcloudio/uni-cloud"),a=require("./uni-icons.DF9TZjrB.js"),o=require("vue"),l=require("@dcloudio/uni-app"),i=require("@dcloudio/uni-i18n"),n=require("./_plugin-vue_export-helper.BDcHAK_d.js");require("@vue/shared");const r={en:{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"Search enter content"},"zh-Hans":{"uni-search-bar.cancel":"取消","uni-search-bar.placeholder":"请输入搜索内容"},"zh-Hant":{"uni-search-bar.cancel":"取消","uni-search-bar.placeholder":"請輸入搜索內容"}},{t:c}=i.initVueI18n(r),s={name:"UniSearchBar",emits:["input","update:modelValue","clear","cancel","confirm","blur","focus"],props:{placeholder:{type:String,default:""},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:""},bgColor:{type:String,default:"#F8F8F8"},maxlength:{type:[Number,String],default:100},value:{type:[Number,String],default:""},modelValue:{type:[Number,String],default:""},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data:()=>({show:!1,showSync:!1,searchVal:""}),computed:{cancelTextI18n(){return this.cancelText||c("uni-search-bar.cancel")},placeholderText(){return this.placeholder||c("uni-search-bar.placeholder")}},watch:{modelValue:{immediate:!0,handler(e){this.searchVal=e,e&&(this.show=!0)}},focus:{immediate:!0,handler(e){if(e){if(this.readonly)return;this.show=!0,this.$nextTick((()=>{this.showSync=!0}))}}},searchVal(e,t){this.$emit("input",e),this.$emit("update:modelValue",e)}},methods:{searchClick(){this.readonly||this.show||(this.show=!0,this.$nextTick((()=>{this.showSync=!0})))},clear(){this.$emit("clear",{value:this.searchVal}),this.searchVal=""},cancel(){this.readonly||(this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,e.hideKeyboard())},confirm(){e.hideKeyboard(),this.$emit("confirm",{value:this.searchVal})},blur(){e.hideKeyboard(),this.$emit("blur",{value:this.searchVal})},emitFocus(e){this.$emit("focus",e.detail)}}};const d=s.setup;s.setup=(e,t)=>{const a=o.useSSRContext();return(a.modules||(a.modules=new Set)).add("uni_modules/uni-search-bar/components/uni-search-bar/uni-search-bar.vue"),d?d(e,t):void 0};const u=n._export_sfc(s,[["ssrRender",function(t,i,r,c,s,d,u,h){const p=e.View,m=l.resolveEasycom(o.resolveDynamicComponent("uni-icons"),a.__easycom_1),x=e.Input,C=e.Text;i(n.ssrRenderComponent(p,o.mergeProps({class:"uni-searchbar"},c),{default:o.withCtx(((e,a,l,i)=>{if(!a)return[o.createVNode(p,{style:{borderRadius:s.radius+"px",backgroundColor:s.bgColor},class:"uni-searchbar__box",onClick:h.searchClick},{default:o.withCtx((()=>[o.createVNode(p,{class:"uni-searchbar__box-icon-search"},{default:o.withCtx((()=>[o.renderSlot(t.$slots,"searchIcon",{},(()=>[o.createVNode(m,{color:"#c0c4cc",size:"18",type:"search"})]),!0)])),_:3}),u.show||u.searchVal?(o.openBlock(),o.createBlock(x,{key:0,focus:u.showSync,disabled:s.readonly,placeholder:h.placeholderText,maxlength:s.maxlength,class:"uni-searchbar__box-search-input","confirm-type":"search",type:"text",modelValue:u.searchVal,"onUpdate:modelValue":e=>u.searchVal=e,onConfirm:h.confirm,onBlur:h.blur,onFocus:h.emitFocus},null,8,["focus","disabled","placeholder","maxlength","modelValue","onUpdate:modelValue","onConfirm","onBlur","onFocus"])):(o.openBlock(),o.createBlock(C,{key:1,class:"uni-searchbar__text-placeholder"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(s.placeholder),1)])),_:1})),u.show&&("always"===s.clearButton||"auto"===s.clearButton&&""!==u.searchVal)&&!s.readonly?(o.openBlock(),o.createBlock(p,{key:2,class:"uni-searchbar__box-icon-clear",onClick:h.clear},{default:o.withCtx((()=>[o.renderSlot(t.$slots,"clearIcon",{},(()=>[o.createVNode(m,{color:"#c0c4cc",size:"20",type:"clear"})]),!0)])),_:3},8,["onClick"])):o.createCommentVNode("",!0)])),_:3},8,["style","onClick"]),"always"===s.cancelButton||u.show&&"auto"===s.cancelButton?(o.openBlock(),o.createBlock(C,{key:0,onClick:h.cancel,class:"uni-searchbar__cancel"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(h.cancelTextI18n),1)])),_:1},8,["onClick"])):o.createCommentVNode("",!0)];a(n.ssrRenderComponent(p,{style:{borderRadius:s.radius+"px",backgroundColor:s.bgColor},class:"uni-searchbar__box",onClick:h.searchClick},{default:o.withCtx(((e,a,l,i)=>{if(!a)return[o.createVNode(p,{class:"uni-searchbar__box-icon-search"},{default:o.withCtx((()=>[o.renderSlot(t.$slots,"searchIcon",{},(()=>[o.createVNode(m,{color:"#c0c4cc",size:"18",type:"search"})]),!0)])),_:3}),u.show||u.searchVal?(o.openBlock(),o.createBlock(x,{key:0,focus:u.showSync,disabled:s.readonly,placeholder:h.placeholderText,maxlength:s.maxlength,class:"uni-searchbar__box-search-input","confirm-type":"search",type:"text",modelValue:u.searchVal,"onUpdate:modelValue":e=>u.searchVal=e,onConfirm:h.confirm,onBlur:h.blur,onFocus:h.emitFocus},null,8,["focus","disabled","placeholder","maxlength","modelValue","onUpdate:modelValue","onConfirm","onBlur","onFocus"])):(o.openBlock(),o.createBlock(C,{key:1,class:"uni-searchbar__text-placeholder"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(s.placeholder),1)])),_:1})),u.show&&("always"===s.clearButton||"auto"===s.clearButton&&""!==u.searchVal)&&!s.readonly?(o.openBlock(),o.createBlock(p,{key:2,class:"uni-searchbar__box-icon-clear",onClick:h.clear},{default:o.withCtx((()=>[o.renderSlot(t.$slots,"clearIcon",{},(()=>[o.createVNode(m,{color:"#c0c4cc",size:"20",type:"clear"})]),!0)])),_:3},8,["onClick"])):o.createCommentVNode("",!0)];a(n.ssrRenderComponent(p,{class:"uni-searchbar__box-icon-search"},{default:o.withCtx(((e,a,l,i)=>{if(!a)return[o.renderSlot(t.$slots,"searchIcon",{},(()=>[o.createVNode(m,{color:"#c0c4cc",size:"18",type:"search"})]),!0)];n.ssrRenderSlot(t.$slots,"searchIcon",{},(()=>{a(n.ssrRenderComponent(m,{color:"#c0c4cc",size:"18",type:"search"},null,l,i))}),a,l,i)})),_:3},l,i)),u.show||u.searchVal?a(n.ssrRenderComponent(x,{focus:u.showSync,disabled:s.readonly,placeholder:h.placeholderText,maxlength:s.maxlength,class:"uni-searchbar__box-search-input","confirm-type":"search",type:"text",modelValue:u.searchVal,"onUpdate:modelValue":e=>u.searchVal=e,onConfirm:h.confirm,onBlur:h.blur,onFocus:h.emitFocus},null,l,i)):a(n.ssrRenderComponent(C,{class:"uni-searchbar__text-placeholder"},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createTextVNode(o.toDisplayString(s.placeholder),1)];t(`${n.ssrInterpolate(s.placeholder)}`)})),_:1},l,i)),u.show&&("always"===s.clearButton||"auto"===s.clearButton&&""!==u.searchVal)&&!s.readonly?a(n.ssrRenderComponent(p,{class:"uni-searchbar__box-icon-clear",onClick:h.clear},{default:o.withCtx(((e,a,l,i)=>{if(!a)return[o.renderSlot(t.$slots,"clearIcon",{},(()=>[o.createVNode(m,{color:"#c0c4cc",size:"20",type:"clear"})]),!0)];n.ssrRenderSlot(t.$slots,"clearIcon",{},(()=>{a(n.ssrRenderComponent(m,{color:"#c0c4cc",size:"20",type:"clear"},null,l,i))}),a,l,i)})),_:3},l,i)):a("\x3c!----\x3e")})),_:3},l,i)),"always"===s.cancelButton||u.show&&"auto"===s.cancelButton?a(n.ssrRenderComponent(C,{onClick:h.cancel,class:"uni-searchbar__cancel"},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createTextVNode(o.toDisplayString(h.cancelTextI18n),1)];t(`${n.ssrInterpolate(h.cancelTextI18n)}`)})),_:1},l,i)):a("\x3c!----\x3e")})),_:3},r))}],["__scopeId","data-v-f744e7d2"]]),h={data:()=>({keyword:"",list:[],loading:!1,page:1,total:0,timer:null,manualTitle:"",manualAuthor:"",aiLoading:!1,showAddPopup:!1,aiCandidates:[]}),onLoad(){this.loadData()},onPullDownRefresh(){this.page=1,this.loadData().then((()=>e.stopPullDownRefresh()))},onReachBottom(){this.list.length<this.total&&(this.page++,this.loadData(!0))},methods:{onInput(e){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.page=1,this.aiCandidates=[],this.loadData()}),300)},onSearch(){this.page=1,this.aiCandidates=[],this.loadData()},onClear(){this.keyword="",this.page=1,this.manualTitle="",this.manualAuthor="",this.aiCandidates=[],this.showAddPopup=!1,this.loadData()},async loadData(a=!1){this.loading=!0;try{const e=await t.callFunction({name:"ancient-search",data:{action:"search",keyword:this.keyword,page:this.page,pageSize:20}}),{list:o,total:l}=e.result.data;this.list=a?[...this.list,...o]:o,this.total=l}catch(o){e.showToast({title:"加载失败",icon:"none"})}finally{this.loading=!1}},getPreview:(e,t=30)=>e?e.length>t?e.slice(0,t)+"...":e:"",goDetail(t){e.navigateTo({url:`/pages/ancient/detail?id=${t}`})},openAddPopup(){this.showAddPopup=!0,this.manualTitle=this.keyword||"",this.manualAuthor="",this.aiCandidates=[]},closeAddPopup(){this.showAddPopup=!1,this.aiLoading=!1,this.aiCandidates=[]},async searchByAI(){const a=(this.manualTitle||"").trim(),o=(this.manualAuthor||"").trim();if(a&&o){this.aiLoading=!0,this.aiCandidates=[];try{const l=await t.callFunction({name:"ancient-search",data:{action:"aiSearch",data:{title:a,author:o}}}),i=l&&l.result||{};if(0!==i.code)throw new Error(i.msg||"AI 检索失败");const n=i.data||{};if(n.existed&&n.text)return void e.showModal({title:"古文已存在",content:"该古文已在库中，是否前往查看？",success:e=>{e.confirm&&this.goDetail(n.text._id)}});if(!n.candidates||0===n.candidates.length)return void e.showToast({title:"未找到精确匹配古文",icon:"none"});this.aiCandidates=n.candidates}catch(l){e.showToast({title:l.message||"AI 检索失败",icon:"none"})}finally{this.aiLoading=!1}}else e.showToast({title:"请先填写古文名称和作者",icon:"none"})},confirmAddFromAI(t){t&&(this.showAddPopup=!1,setTimeout((()=>{e.showModal({title:"确认添加古文",content:`将《${t.title}》- ${t.author} 加入古文库？`,success:async e=>{e.confirm?await this.submitAddFromAI(t):this.showAddPopup=!0}})}),50))},async submitAddFromAI(a){if(a){e.showLoading({title:"提交中..."});try{const o=await t.callFunction({name:"ancient-search",data:{action:"confirmAdd",data:a}}),l=o&&o.result||{};if(0!==l.code)throw new Error(l.msg||"添加失败");const i=l.data||{};if(i.existed&&i.text)return e.showToast({title:"古文已存在",icon:"none"}),void this.goDetail(i.text._id);e.showToast({title:"添加成功",icon:"success"}),this.keyword=a.title,this.page=1,this.aiCandidates=[],this.showAddPopup=!1,await this.loadData()}catch(o){e.showToast({title:o.message||"添加失败",icon:"none"})}finally{e.hideLoading()}}}}};const p=h.setup;h.setup=(e,t)=>{const a=o.useSSRContext();return(a.modules||(a.modules=new Set)).add("pages/ancient/list.vue"),p?p(e,t):void 0};const m=n._export_sfc(h,[["ssrRender",function(t,a,i,r,c,s,d,h){const p=e.View,m=l.resolveEasycom(o.resolveDynamicComponent("uni-search-bar"),u),x=e.Text,C=e.Button,V=e.Input,f=e.ScrollView;a(n.ssrRenderComponent(p,o.mergeProps({class:"container"},r),{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createVNode(p,{class:"search-bar"},{default:o.withCtx((()=>[o.createVNode(m,{modelValue:d.keyword,"onUpdate:modelValue":e=>d.keyword=e,placeholder:"搜索古文标题或内容",onConfirm:h.onSearch,onClear:h.onClear,onInput:h.onInput},null,8,["modelValue","onUpdate:modelValue","onConfirm","onClear","onInput"])])),_:1}),d.list.length>0?(o.openBlock(),o.createBlock(p,{key:0,class:"list"},{default:o.withCtx((()=>[(o.openBlock(!0),o.createBlock(o.Fragment,null,o.renderList(d.list,(e=>(o.openBlock(),o.createBlock(p,{class:"list-item",key:e._id,onClick:t=>h.goDetail(e._id)},{default:o.withCtx((()=>[o.createVNode(p,{class:"item-title"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(e.title),1)])),_:2},1024),o.createVNode(p,{class:"item-meta"},{default:o.withCtx((()=>[o.createVNode(x,{class:"item-author"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(e.dynasty)+" · "+o.toDisplayString(e.author),1)])),_:2},1024)])),_:2},1024),o.createVNode(p,{class:"item-preview"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(h.getPreview(e.content)),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):d.loading?o.createCommentVNode("",!0):(o.openBlock(),o.createBlock(p,{key:1,class:"empty"},{default:o.withCtx((()=>[o.createVNode(x,{class:"empty-text"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(d.keyword?"未找到相关古文":"暂无古文数据"),1)])),_:1}),d.keyword?(o.openBlock(),o.createBlock(p,{key:0,class:"empty-action-card"},{default:o.withCtx((()=>[o.createVNode(x,{class:"empty-tip"},{default:o.withCtx((()=>[o.createTextVNode("没找到想要的文章？")])),_:1}),o.createVNode(x,{class:"empty-desc"},{default:o.withCtx((()=>[o.createTextVNode("你可以手动添加，系统会帮你智能匹配内容")])),_:1}),o.createVNode(C,{class:"add-entry-btn",size:"mini",onClick:h.openAddPopup},{default:o.withCtx((()=>[o.createTextVNode(" 添加文章 ")])),_:1},8,["onClick"])])),_:1})):o.createCommentVNode("",!0)])),_:1})),d.loading?(o.openBlock(),o.createBlock(p,{key:2,class:"loading"},{default:o.withCtx((()=>[o.createVNode(x,null,{default:o.withCtx((()=>[o.createTextVNode("加载中...")])),_:1})])),_:1})):o.createCommentVNode("",!0),d.showAddPopup?(o.openBlock(),o.createBlock(p,{key:3,class:"mask"},{default:o.withCtx((()=>[o.createVNode(p,{class:"popup-card",onClick:o.withModifiers((()=>{}),["stop"])},{default:o.withCtx((()=>[o.createVNode(p,{class:"popup-header"},{default:o.withCtx((()=>[o.createVNode(p,{class:"popup-title"},{default:o.withCtx((()=>[o.createTextVNode("新增古文文章")])),_:1}),o.createVNode(x,{class:"popup-close",onClick:h.closeAddPopup},{default:o.withCtx((()=>[o.createTextVNode("×")])),_:1},8,["onClick"])])),_:1}),o.createVNode(p,{class:"field-group"},{default:o.withCtx((()=>[o.createVNode(p,{class:"field-label"},{default:o.withCtx((()=>[o.createTextVNode("古文标题")])),_:1}),o.createVNode(V,{class:"manual-input",modelValue:d.manualTitle,"onUpdate:modelValue":e=>d.manualTitle=e,placeholder:"请输入古文标题","confirm-type":"next"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),o.createVNode(p,{class:"field-group"},{default:o.withCtx((()=>[o.createVNode(p,{class:"field-label"},{default:o.withCtx((()=>[o.createTextVNode("作者")])),_:1}),o.createVNode(V,{class:"manual-input",modelValue:d.manualAuthor,"onUpdate:modelValue":e=>d.manualAuthor=e,placeholder:"请输入作者","confirm-type":"search"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),o.createVNode(p,{class:"popup-actions"},{default:o.withCtx((()=>[o.createVNode(C,{class:"btn-cancel",size:"mini",onClick:h.closeAddPopup},{default:o.withCtx((()=>[o.createTextVNode("取消")])),_:1},8,["onClick"]),o.createVNode(C,{class:"btn-search",type:"primary",size:"mini",loading:d.aiLoading,onClick:h.searchByAI},{default:o.withCtx((()=>[o.createTextVNode("查找")])),_:1},8,["loading","onClick"])])),_:1}),d.aiCandidates.length>0?(o.openBlock(),o.createBlock(f,{key:0,class:"candidate-list","scroll-y":""},{default:o.withCtx((()=>[(o.openBlock(!0),o.createBlock(o.Fragment,null,o.renderList(d.aiCandidates,((e,t)=>(o.openBlock(),o.createBlock(p,{class:"ai-candidate",key:t},{default:o.withCtx((()=>[o.createVNode(p,{class:"candidate-index"},{default:o.withCtx((()=>[o.createTextVNode("版本 "+o.toDisplayString(t+1),1)])),_:2},1024),o.createVNode(p,{class:"candidate-title"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(e.title),1)])),_:2},1024),o.createVNode(p,{class:"candidate-meta"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(e.dynasty||"未知朝代")+" · "+o.toDisplayString(e.author),1)])),_:2},1024),o.createVNode(p,{class:"candidate-content"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(h.getPreview(e.content,110)),1)])),_:2},1024),o.createVNode(C,{class:"manual-btn",type:"primary",size:"mini",onClick:t=>h.confirmAddFromAI(e)},{default:o.withCtx((()=>[o.createTextVNode(" 确认增加 ")])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})):o.createCommentVNode("",!0)])),_:1},8,["onClick"])])),_:1})):o.createCommentVNode("",!0)];t(n.ssrRenderComponent(p,{class:"search-bar"},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createVNode(m,{modelValue:d.keyword,"onUpdate:modelValue":e=>d.keyword=e,placeholder:"搜索古文标题或内容",onConfirm:h.onSearch,onClear:h.onClear,onInput:h.onInput},null,8,["modelValue","onUpdate:modelValue","onConfirm","onClear","onInput"])];t(n.ssrRenderComponent(m,{modelValue:d.keyword,"onUpdate:modelValue":e=>d.keyword=e,placeholder:"搜索古文标题或内容",onConfirm:h.onSearch,onClear:h.onClear,onInput:h.onInput},null,a,l))})),_:1},a,l)),d.list.length>0?t(n.ssrRenderComponent(p,{class:"list"},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[(o.openBlock(!0),o.createBlock(o.Fragment,null,o.renderList(d.list,(e=>(o.openBlock(),o.createBlock(p,{class:"list-item",key:e._id,onClick:t=>h.goDetail(e._id)},{default:o.withCtx((()=>[o.createVNode(p,{class:"item-title"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(e.title),1)])),_:2},1024),o.createVNode(p,{class:"item-meta"},{default:o.withCtx((()=>[o.createVNode(x,{class:"item-author"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(e.dynasty)+" · "+o.toDisplayString(e.author),1)])),_:2},1024)])),_:2},1024),o.createVNode(p,{class:"item-preview"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(h.getPreview(e.content)),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))];t("\x3c!--[--\x3e"),n.ssrRenderList(d.list,(e=>{t(n.ssrRenderComponent(p,{class:"list-item",key:e._id,onClick:t=>h.goDetail(e._id)},{default:o.withCtx(((t,a,l,i)=>{if(!a)return[o.createVNode(p,{class:"item-title"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(e.title),1)])),_:2},1024),o.createVNode(p,{class:"item-meta"},{default:o.withCtx((()=>[o.createVNode(x,{class:"item-author"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(e.dynasty)+" · "+o.toDisplayString(e.author),1)])),_:2},1024)])),_:2},1024),o.createVNode(p,{class:"item-preview"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(h.getPreview(e.content)),1)])),_:2},1024)];a(n.ssrRenderComponent(p,{class:"item-title"},{default:o.withCtx(((t,a,l,i)=>{if(!a)return[o.createTextVNode(o.toDisplayString(e.title),1)];a(`${n.ssrInterpolate(e.title)}`)})),_:2},l,i)),a(n.ssrRenderComponent(p,{class:"item-meta"},{default:o.withCtx(((t,a,l,i)=>{if(!a)return[o.createVNode(x,{class:"item-author"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(e.dynasty)+" · "+o.toDisplayString(e.author),1)])),_:2},1024)];a(n.ssrRenderComponent(x,{class:"item-author"},{default:o.withCtx(((t,a,l,i)=>{if(!a)return[o.createTextVNode(o.toDisplayString(e.dynasty)+" · "+o.toDisplayString(e.author),1)];a(`${n.ssrInterpolate(e.dynasty)} · ${n.ssrInterpolate(e.author)}`)})),_:2},l,i))})),_:2},l,i)),a(n.ssrRenderComponent(p,{class:"item-preview"},{default:o.withCtx(((t,a,l,i)=>{if(!a)return[o.createTextVNode(o.toDisplayString(h.getPreview(e.content)),1)];a(`${n.ssrInterpolate(h.getPreview(e.content))}`)})),_:2},l,i))})),_:2},a,l))})),t("\x3c!--]--\x3e")})),_:1},a,l)):d.loading?t("\x3c!----\x3e"):t(n.ssrRenderComponent(p,{class:"empty"},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createVNode(x,{class:"empty-text"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(d.keyword?"未找到相关古文":"暂无古文数据"),1)])),_:1}),d.keyword?(o.openBlock(),o.createBlock(p,{key:0,class:"empty-action-card"},{default:o.withCtx((()=>[o.createVNode(x,{class:"empty-tip"},{default:o.withCtx((()=>[o.createTextVNode("没找到想要的文章？")])),_:1}),o.createVNode(x,{class:"empty-desc"},{default:o.withCtx((()=>[o.createTextVNode("你可以手动添加，系统会帮你智能匹配内容")])),_:1}),o.createVNode(C,{class:"add-entry-btn",size:"mini",onClick:h.openAddPopup},{default:o.withCtx((()=>[o.createTextVNode(" 添加文章 ")])),_:1},8,["onClick"])])),_:1})):o.createCommentVNode("",!0)];t(n.ssrRenderComponent(x,{class:"empty-text"},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createTextVNode(o.toDisplayString(d.keyword?"未找到相关古文":"暂无古文数据"),1)];t(`${n.ssrInterpolate(d.keyword?"未找到相关古文":"暂无古文数据")}`)})),_:1},a,l)),d.keyword?t(n.ssrRenderComponent(p,{class:"empty-action-card"},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createVNode(x,{class:"empty-tip"},{default:o.withCtx((()=>[o.createTextVNode("没找到想要的文章？")])),_:1}),o.createVNode(x,{class:"empty-desc"},{default:o.withCtx((()=>[o.createTextVNode("你可以手动添加，系统会帮你智能匹配内容")])),_:1}),o.createVNode(C,{class:"add-entry-btn",size:"mini",onClick:h.openAddPopup},{default:o.withCtx((()=>[o.createTextVNode(" 添加文章 ")])),_:1},8,["onClick"])];t(n.ssrRenderComponent(x,{class:"empty-tip"},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createTextVNode("没找到想要的文章？")];t("没找到想要的文章？")})),_:1},a,l)),t(n.ssrRenderComponent(x,{class:"empty-desc"},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createTextVNode("你可以手动添加，系统会帮你智能匹配内容")];t("你可以手动添加，系统会帮你智能匹配内容")})),_:1},a,l)),t(n.ssrRenderComponent(C,{class:"add-entry-btn",size:"mini",onClick:h.openAddPopup},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createTextVNode(" 添加文章 ")];t(" 添加文章 ")})),_:1},a,l))})),_:1},a,l)):t("\x3c!----\x3e")})),_:1},a,l)),d.loading?t(n.ssrRenderComponent(p,{class:"loading"},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createVNode(x,null,{default:o.withCtx((()=>[o.createTextVNode("加载中...")])),_:1})];t(n.ssrRenderComponent(x,null,{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createTextVNode("加载中...")];t("加载中...")})),_:1},a,l))})),_:1},a,l)):t("\x3c!----\x3e"),d.showAddPopup?t(n.ssrRenderComponent(p,{class:"mask"},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createVNode(p,{class:"popup-card",onClick:o.withModifiers((()=>{}),["stop"])},{default:o.withCtx((()=>[o.createVNode(p,{class:"popup-header"},{default:o.withCtx((()=>[o.createVNode(p,{class:"popup-title"},{default:o.withCtx((()=>[o.createTextVNode("新增古文文章")])),_:1}),o.createVNode(x,{class:"popup-close",onClick:h.closeAddPopup},{default:o.withCtx((()=>[o.createTextVNode("×")])),_:1},8,["onClick"])])),_:1}),o.createVNode(p,{class:"field-group"},{default:o.withCtx((()=>[o.createVNode(p,{class:"field-label"},{default:o.withCtx((()=>[o.createTextVNode("古文标题")])),_:1}),o.createVNode(V,{class:"manual-input",modelValue:d.manualTitle,"onUpdate:modelValue":e=>d.manualTitle=e,placeholder:"请输入古文标题","confirm-type":"next"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),o.createVNode(p,{class:"field-group"},{default:o.withCtx((()=>[o.createVNode(p,{class:"field-label"},{default:o.withCtx((()=>[o.createTextVNode("作者")])),_:1}),o.createVNode(V,{class:"manual-input",modelValue:d.manualAuthor,"onUpdate:modelValue":e=>d.manualAuthor=e,placeholder:"请输入作者","confirm-type":"search"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),o.createVNode(p,{class:"popup-actions"},{default:o.withCtx((()=>[o.createVNode(C,{class:"btn-cancel",size:"mini",onClick:h.closeAddPopup},{default:o.withCtx((()=>[o.createTextVNode("取消")])),_:1},8,["onClick"]),o.createVNode(C,{class:"btn-search",type:"primary",size:"mini",loading:d.aiLoading,onClick:h.searchByAI},{default:o.withCtx((()=>[o.createTextVNode("查找")])),_:1},8,["loading","onClick"])])),_:1}),d.aiCandidates.length>0?(o.openBlock(),o.createBlock(f,{key:0,class:"candidate-list","scroll-y":""},{default:o.withCtx((()=>[(o.openBlock(!0),o.createBlock(o.Fragment,null,o.renderList(d.aiCandidates,((e,t)=>(o.openBlock(),o.createBlock(p,{class:"ai-candidate",key:t},{default:o.withCtx((()=>[o.createVNode(p,{class:"candidate-index"},{default:o.withCtx((()=>[o.createTextVNode("版本 "+o.toDisplayString(t+1),1)])),_:2},1024),o.createVNode(p,{class:"candidate-title"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(e.title),1)])),_:2},1024),o.createVNode(p,{class:"candidate-meta"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(e.dynasty||"未知朝代")+" · "+o.toDisplayString(e.author),1)])),_:2},1024),o.createVNode(p,{class:"candidate-content"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(h.getPreview(e.content,110)),1)])),_:2},1024),o.createVNode(C,{class:"manual-btn",type:"primary",size:"mini",onClick:t=>h.confirmAddFromAI(e)},{default:o.withCtx((()=>[o.createTextVNode(" 确认增加 ")])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})):o.createCommentVNode("",!0)])),_:1},8,["onClick"])];t(n.ssrRenderComponent(p,{class:"popup-card",onClick:()=>{}},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createVNode(p,{class:"popup-header"},{default:o.withCtx((()=>[o.createVNode(p,{class:"popup-title"},{default:o.withCtx((()=>[o.createTextVNode("新增古文文章")])),_:1}),o.createVNode(x,{class:"popup-close",onClick:h.closeAddPopup},{default:o.withCtx((()=>[o.createTextVNode("×")])),_:1},8,["onClick"])])),_:1}),o.createVNode(p,{class:"field-group"},{default:o.withCtx((()=>[o.createVNode(p,{class:"field-label"},{default:o.withCtx((()=>[o.createTextVNode("古文标题")])),_:1}),o.createVNode(V,{class:"manual-input",modelValue:d.manualTitle,"onUpdate:modelValue":e=>d.manualTitle=e,placeholder:"请输入古文标题","confirm-type":"next"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),o.createVNode(p,{class:"field-group"},{default:o.withCtx((()=>[o.createVNode(p,{class:"field-label"},{default:o.withCtx((()=>[o.createTextVNode("作者")])),_:1}),o.createVNode(V,{class:"manual-input",modelValue:d.manualAuthor,"onUpdate:modelValue":e=>d.manualAuthor=e,placeholder:"请输入作者","confirm-type":"search"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),o.createVNode(p,{class:"popup-actions"},{default:o.withCtx((()=>[o.createVNode(C,{class:"btn-cancel",size:"mini",onClick:h.closeAddPopup},{default:o.withCtx((()=>[o.createTextVNode("取消")])),_:1},8,["onClick"]),o.createVNode(C,{class:"btn-search",type:"primary",size:"mini",loading:d.aiLoading,onClick:h.searchByAI},{default:o.withCtx((()=>[o.createTextVNode("查找")])),_:1},8,["loading","onClick"])])),_:1}),d.aiCandidates.length>0?(o.openBlock(),o.createBlock(f,{key:0,class:"candidate-list","scroll-y":""},{default:o.withCtx((()=>[(o.openBlock(!0),o.createBlock(o.Fragment,null,o.renderList(d.aiCandidates,((e,t)=>(o.openBlock(),o.createBlock(p,{class:"ai-candidate",key:t},{default:o.withCtx((()=>[o.createVNode(p,{class:"candidate-index"},{default:o.withCtx((()=>[o.createTextVNode("版本 "+o.toDisplayString(t+1),1)])),_:2},1024),o.createVNode(p,{class:"candidate-title"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(e.title),1)])),_:2},1024),o.createVNode(p,{class:"candidate-meta"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(e.dynasty||"未知朝代")+" · "+o.toDisplayString(e.author),1)])),_:2},1024),o.createVNode(p,{class:"candidate-content"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(h.getPreview(e.content,110)),1)])),_:2},1024),o.createVNode(C,{class:"manual-btn",type:"primary",size:"mini",onClick:t=>h.confirmAddFromAI(e)},{default:o.withCtx((()=>[o.createTextVNode(" 确认增加 ")])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})):o.createCommentVNode("",!0)];t(n.ssrRenderComponent(p,{class:"popup-header"},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createVNode(p,{class:"popup-title"},{default:o.withCtx((()=>[o.createTextVNode("新增古文文章")])),_:1}),o.createVNode(x,{class:"popup-close",onClick:h.closeAddPopup},{default:o.withCtx((()=>[o.createTextVNode("×")])),_:1},8,["onClick"])];t(n.ssrRenderComponent(p,{class:"popup-title"},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createTextVNode("新增古文文章")];t("新增古文文章")})),_:1},a,l)),t(n.ssrRenderComponent(x,{class:"popup-close",onClick:h.closeAddPopup},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createTextVNode("×")];t("×")})),_:1},a,l))})),_:1},a,l)),t(n.ssrRenderComponent(p,{class:"field-group"},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createVNode(p,{class:"field-label"},{default:o.withCtx((()=>[o.createTextVNode("古文标题")])),_:1}),o.createVNode(V,{class:"manual-input",modelValue:d.manualTitle,"onUpdate:modelValue":e=>d.manualTitle=e,placeholder:"请输入古文标题","confirm-type":"next"},null,8,["modelValue","onUpdate:modelValue"])];t(n.ssrRenderComponent(p,{class:"field-label"},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createTextVNode("古文标题")];t("古文标题")})),_:1},a,l)),t(n.ssrRenderComponent(V,{class:"manual-input",modelValue:d.manualTitle,"onUpdate:modelValue":e=>d.manualTitle=e,placeholder:"请输入古文标题","confirm-type":"next"},null,a,l))})),_:1},a,l)),t(n.ssrRenderComponent(p,{class:"field-group"},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createVNode(p,{class:"field-label"},{default:o.withCtx((()=>[o.createTextVNode("作者")])),_:1}),o.createVNode(V,{class:"manual-input",modelValue:d.manualAuthor,"onUpdate:modelValue":e=>d.manualAuthor=e,placeholder:"请输入作者","confirm-type":"search"},null,8,["modelValue","onUpdate:modelValue"])];t(n.ssrRenderComponent(p,{class:"field-label"},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createTextVNode("作者")];t("作者")})),_:1},a,l)),t(n.ssrRenderComponent(V,{class:"manual-input",modelValue:d.manualAuthor,"onUpdate:modelValue":e=>d.manualAuthor=e,placeholder:"请输入作者","confirm-type":"search"},null,a,l))})),_:1},a,l)),t(n.ssrRenderComponent(p,{class:"popup-actions"},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createVNode(C,{class:"btn-cancel",size:"mini",onClick:h.closeAddPopup},{default:o.withCtx((()=>[o.createTextVNode("取消")])),_:1},8,["onClick"]),o.createVNode(C,{class:"btn-search",type:"primary",size:"mini",loading:d.aiLoading,onClick:h.searchByAI},{default:o.withCtx((()=>[o.createTextVNode("查找")])),_:1},8,["loading","onClick"])];t(n.ssrRenderComponent(C,{class:"btn-cancel",size:"mini",onClick:h.closeAddPopup},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createTextVNode("取消")];t("取消")})),_:1},a,l)),t(n.ssrRenderComponent(C,{class:"btn-search",type:"primary",size:"mini",loading:d.aiLoading,onClick:h.searchByAI},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createTextVNode("查找")];t("查找")})),_:1},a,l))})),_:1},a,l)),d.aiCandidates.length>0?t(n.ssrRenderComponent(f,{class:"candidate-list","scroll-y":""},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[(o.openBlock(!0),o.createBlock(o.Fragment,null,o.renderList(d.aiCandidates,((e,t)=>(o.openBlock(),o.createBlock(p,{class:"ai-candidate",key:t},{default:o.withCtx((()=>[o.createVNode(p,{class:"candidate-index"},{default:o.withCtx((()=>[o.createTextVNode("版本 "+o.toDisplayString(t+1),1)])),_:2},1024),o.createVNode(p,{class:"candidate-title"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(e.title),1)])),_:2},1024),o.createVNode(p,{class:"candidate-meta"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(e.dynasty||"未知朝代")+" · "+o.toDisplayString(e.author),1)])),_:2},1024),o.createVNode(p,{class:"candidate-content"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(h.getPreview(e.content,110)),1)])),_:2},1024),o.createVNode(C,{class:"manual-btn",type:"primary",size:"mini",onClick:t=>h.confirmAddFromAI(e)},{default:o.withCtx((()=>[o.createTextVNode(" 确认增加 ")])),_:2},1032,["onClick"])])),_:2},1024)))),128))];t("\x3c!--[--\x3e"),n.ssrRenderList(d.aiCandidates,((e,i)=>{t(n.ssrRenderComponent(p,{class:"ai-candidate",key:i},{default:o.withCtx(((t,a,l,r)=>{if(!a)return[o.createVNode(p,{class:"candidate-index"},{default:o.withCtx((()=>[o.createTextVNode("版本 "+o.toDisplayString(i+1),1)])),_:2},1024),o.createVNode(p,{class:"candidate-title"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(e.title),1)])),_:2},1024),o.createVNode(p,{class:"candidate-meta"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(e.dynasty||"未知朝代")+" · "+o.toDisplayString(e.author),1)])),_:2},1024),o.createVNode(p,{class:"candidate-content"},{default:o.withCtx((()=>[o.createTextVNode(o.toDisplayString(h.getPreview(e.content,110)),1)])),_:2},1024),o.createVNode(C,{class:"manual-btn",type:"primary",size:"mini",onClick:t=>h.confirmAddFromAI(e)},{default:o.withCtx((()=>[o.createTextVNode(" 确认增加 ")])),_:2},1032,["onClick"])];a(n.ssrRenderComponent(p,{class:"candidate-index"},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createTextVNode("版本 "+o.toDisplayString(i+1),1)];t(`版本 ${n.ssrInterpolate(i+1)}`)})),_:2},l,r)),a(n.ssrRenderComponent(p,{class:"candidate-title"},{default:o.withCtx(((t,a,l,i)=>{if(!a)return[o.createTextVNode(o.toDisplayString(e.title),1)];a(`${n.ssrInterpolate(e.title)}`)})),_:2},l,r)),a(n.ssrRenderComponent(p,{class:"candidate-meta"},{default:o.withCtx(((t,a,l,i)=>{if(!a)return[o.createTextVNode(o.toDisplayString(e.dynasty||"未知朝代")+" · "+o.toDisplayString(e.author),1)];a(`${n.ssrInterpolate(e.dynasty||"未知朝代")} · ${n.ssrInterpolate(e.author)}`)})),_:2},l,r)),a(n.ssrRenderComponent(p,{class:"candidate-content"},{default:o.withCtx(((t,a,l,i)=>{if(!a)return[o.createTextVNode(o.toDisplayString(h.getPreview(e.content,110)),1)];a(`${n.ssrInterpolate(h.getPreview(e.content,110))}`)})),_:2},l,r)),a(n.ssrRenderComponent(C,{class:"manual-btn",type:"primary",size:"mini",onClick:t=>h.confirmAddFromAI(e)},{default:o.withCtx(((e,t,a,l)=>{if(!t)return[o.createTextVNode(" 确认增加 ")];t(" 确认增加 ")})),_:2},l,r))})),_:2},a,l))})),t("\x3c!--]--\x3e")})),_:1},a,l)):t("\x3c!----\x3e")})),_:1},a,l))})),_:1},a,l)):t("\x3c!----\x3e")})),_:1},i))}],["__scopeId","data-v-d8623b33"]]);exports.default=m;
