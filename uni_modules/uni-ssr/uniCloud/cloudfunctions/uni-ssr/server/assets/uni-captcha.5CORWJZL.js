"use strict";const e=require("@dcloudio/uni-h5"),t=require("@dcloudio/uni-cloud"),a=require("./uni-icons.DF9TZjrB.js"),c=require("vue"),o=require("@dcloudio/uni-app"),s=require("./_plugin-vue_export-helper.BDcHAK_d.js"),n={props:{modelValue:String,value:String,scene:{type:String,default:()=>""},focus:{type:Boolean,default:()=>!1}},computed:{val:{get(){return this.value||this.modelValue},set(e){this.$emit("update:modelValue",e)}}},data:()=>({focusCaptchaInput:!1,captchaBase64:"",loging:!1}),watch:{scene:{handler(t){t?this.getImageCaptcha(this.focus):e.showToast({title:"scene不能为空",icon:"none"})},immediate:!0}},methods:{getImageCaptcha(a=!0){this.loging=!0,a&&(this.val="",this.focusCaptchaInput=!0);t.importObject("uni-captcha-co",{customUI:!0}).getImageCaptcha({scene:this.scene}).then((e=>{this.captchaBase64=e.captchaBase64})).catch((t=>{e.showToast({title:t.message,icon:"none"})})).finally((e=>{this.loging=!1}))}}};const l=n.setup;n.setup=(e,t)=>{const a=c.useSSRContext();return(a.modules||(a.modules=new Set)).add("uni_modules/uni-captcha/components/uni-captcha/uni-captcha.vue"),l?l(e,t):void 0};const i=s._export_sfc(n,[["ssrRender",function(t,n,l,i,p,u,r,d){const h=e.View,m=o.resolveEasycom(c.resolveDynamicComponent("uni-icons"),a.__easycom_1),g=e.Image,C=e.Input;n(s.ssrRenderComponent(h,c.mergeProps({class:"captcha-box"},i),{default:c.withCtx(((e,t,a,o)=>{if(!t)return[c.createVNode(h,{class:"captcha-img-box"},{default:c.withCtx((()=>[r.loging?(c.openBlock(),c.createBlock(m,{key:0,class:"loding",size:"20px",color:"#BBB",type:"spinner-cycle"})):c.createCommentVNode("",!0),c.createVNode(g,{class:["captcha-img",{opacity:r.loging}],onClick:d.getImageCaptcha,src:r.captchaBase64,mode:"widthFix"},null,8,["class","onClick","src"])])),_:1}),c.createVNode(C,{onBlur:e=>r.focusCaptchaInput=!1,focus:r.focusCaptchaInput,type:"text",class:"captcha",inputBorder:!1,maxlength:"4",modelValue:d.val,"onUpdate:modelValue":e=>d.val=e,placeholder:"请输入验证码"},null,8,["onBlur","focus","modelValue","onUpdate:modelValue"])];t(s.ssrRenderComponent(h,{class:"captcha-img-box"},{default:c.withCtx(((e,t,a,o)=>{if(!t)return[r.loging?(c.openBlock(),c.createBlock(m,{key:0,class:"loding",size:"20px",color:"#BBB",type:"spinner-cycle"})):c.createCommentVNode("",!0),c.createVNode(g,{class:["captcha-img",{opacity:r.loging}],onClick:d.getImageCaptcha,src:r.captchaBase64,mode:"widthFix"},null,8,["class","onClick","src"])];r.loging?t(s.ssrRenderComponent(m,{class:"loding",size:"20px",color:"#BBB",type:"spinner-cycle"},null,a,o)):t("\x3c!----\x3e"),t(s.ssrRenderComponent(g,{class:["captcha-img",{opacity:r.loging}],onClick:d.getImageCaptcha,src:r.captchaBase64,mode:"widthFix"},null,a,o))})),_:1},a,o)),t(s.ssrRenderComponent(C,{onBlur:e=>r.focusCaptchaInput=!1,focus:r.focusCaptchaInput,type:"text",class:"captcha",inputBorder:!1,maxlength:"4",modelValue:d.val,"onUpdate:modelValue":e=>d.val=e,placeholder:"请输入验证码"},null,a,o))})),_:1},l))}],["__scopeId","data-v-a9469c9e"]]);exports.__easycom_1=i;
