import{a8 as e,a9 as i,aa as o,k as s,l as n,r as t,c as a,w as l,f as u,o as p,a as r,d,m as g,e as c,F as h,G as m,g as f,y}from"./index-mx_jV9ub.js";import{_ as b}from"./uni-id-pages-agreements.V7qmHBO0.js";import{r as w}from"./uni-app.es.Cu18BVUg.js";import{_}from"./uni-easyinput.Cj5-1L9k.js";import{_ as k}from"./uni-id-pages-fab-login.CneU7sRE.js";import{m as x}from"./login-page.mixin.CwApEuwg.js";import{_ as L}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-popup-dialog.DHeZCM4G.js";import"./uni-popup.CapNXNO4.js";import"./store.CwO1uWiY.js";const v=L({mixins:[x],data:()=>({type:"",phone:"",focusPhone:!1,logo:"/static/logo.png"}),computed:{loginTypes:async()=>e.loginTypes,isPhone(){return/^1\d{10}$/.test(this.phone)},imgSrc(){return{weixin:"/uni_modules/uni-id-pages/static/login/weixin.png",apple:"/uni_modules/uni-id-pages/static/app/apple.png",huawei:"/uni_modules/uni-id-pages/static/login/huawei.png",huaweiMobile:"/uni_modules/uni-id-pages/static/login/huawei-mobile.png"}[this.type]}},async onLoad(o){let s=o.type||e.loginTypes[0];this.type=s,"univerify"!=s&&(this.focusPhone=!0),this.$nextTick((()=>{["weixin","apple","huawei","huaweiMobile"].includes(s)&&(this.$refs.uniFabLogin.servicesList=this.$refs.uniFabLogin.servicesList.filter((e=>e.id!=s)))})),i("uni-id-pages-setLoginType",(e=>{this.type=e}))},onShow(){document.onkeydown=e=>{var i=e||window.event;i&&13==i.keyCode&&this.toSmsPage()}},onUnload(){o("uni-id-pages-setLoginType")},onReady(){},methods:{showCurrentWebview(){undefined.setStyle({top:0})},showAgreementModal(){this.$refs.agreements.popup()},quickLogin(e){var i,o;let s={};console.log(e),(null==(i=e.detail)?void 0:i.code)&&(s.phoneNumberCode=e.detail.code),("weixinMobile"!==this.type&&"huaweiMobile"!==this.type||(null==(o=e.detail)?void 0:o.code))&&this.$refs.uniFabLogin.login_before(this.type,!0,s)},toSmsPage(){return this.isPhone?this.needAgreements&&!this.agree?this.$refs.agreements.popup(this.toSmsPage):void n({url:"/uni_modules/uni-id-pages/pages/login/login-smscode?phoneNumber="+this.phone}):(this.focusPhone=!0,s({title:"手机号码格式不正确",icon:"none",duration:3e3}))},toPwdLogin(){n({url:"../login/password"})},chooseArea(){s({title:"暂不支持其他国家",icon:"none",duration:3e3})}}},[["render",function(e,i,o,s,n,x){const L=m,v=u,P=f,C=y,M=w(t("uni-id-pages-agreements"),b),j=w(t("uni-easyinput"),_),S=w(t("uni-id-pages-fab-login"),k);return p(),a(v,{class:"uni-content"},{default:l((()=>[r(v,{class:"login-logo"},{default:l((()=>[r(L,{src:n.logo},null,8,["src"])])),_:1}),r(P,{class:"title"},{default:l((()=>[d("请选择登录方式")])),_:1}),["apple","weixin","weixinMobile","huawei","huaweiMobile"].includes(n.type)?(p(),g(h,{key:0},[r(P,{class:"tip"},{default:l((()=>[d("将根据第三方账号服务平台的授权范围获取你的信息")])),_:1}),r(v,{class:"quickLogin"},{default:l((()=>["weixinMobile"!==n.type&&"huaweiMobile"!==n.type?(p(),a(L,{key:0,onClick:x.quickLogin,src:x.imgSrc,mode:"widthFix",class:"quickLoginBtn"},null,8,["onClick","src"])):(p(),a(v,{key:1,style:{position:"relative"}},{default:l((()=>["weixinMobile"===n.type?(p(),a(C,{key:0,type:"primary","open-type":"getPhoneNumber",onGetphonenumber:x.quickLogin,class:"uni-btn"},{default:l((()=>[d("微信授权手机号登录")])),_:1},8,["onGetphonenumber"])):c("",!0),this.needAgreements&&!this.agree?(p(),a(v,{key:1,class:"mobile-login-agreement-layer",onClick:x.showAgreementModal},null,8,["onClick"])):c("",!0)])),_:1})),r(M,{scope:"register",ref:"agreements"},null,512)])),_:1})],64)):(p(),g(h,{key:1},[r(P,{class:"tip"},{default:l((()=>[d("未注册的账号验证通过后将自动注册")])),_:1}),r(v,{class:"phone-box"},{default:l((()=>[r(v,{onClick:x.chooseArea,class:"area"},{default:l((()=>[d("+86")])),_:1},8,["onClick"]),r(j,{trim:"both",focus:n.focusPhone,onBlur:i[0]||(i[0]=e=>n.focusPhone=!1),class:"input-box",type:"number",inputBorder:!1,modelValue:n.phone,"onUpdate:modelValue":i[1]||(i[1]=e=>n.phone=e),maxlength:"11",placeholder:"请输入手机号"},null,8,["focus","modelValue"])])),_:1}),r(M,{scope:"register",ref:"agreements"},null,512),r(C,{class:"uni-btn",type:"primary",onClick:x.toSmsPage},{default:l((()=>[d("获取验证码")])),_:1},8,["onClick"])],64)),r(S,{ref:"uniFabLogin"},null,512)])),_:1})}],["__scopeId","data-v-d9f6aceb"]]);export{v as default};
