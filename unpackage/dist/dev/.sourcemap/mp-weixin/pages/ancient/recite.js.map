{"version":3,"file":"recite.js","sources":["pages/ancient/recite.vue","pages/ancient/recite.vue?type=page"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <view class=\"title-bar\">\r\n      <text class=\"title\">{{ textData.title }}</text>\r\n      <text class=\"meta\">{{ textData.dynasty }} · {{ textData.author }}</text>\r\n    </view>\r\n\r\n    <view class=\"content-box\" v-if=\"showArticleContent && textData.content\">\r\n      <text class=\"content\">{{ textData.content }}</text>\r\n    </view>\r\n\r\n    <!-- 提示区域 -->\r\n    <view class=\"hint-area\" v-if=\"hints.length > 0\">\r\n      <view class=\"hint-label\">提示内容：</view>\r\n      <view class=\"hint-content\">\r\n        <text v-for=\"(h, idx) in hints\" :key=\"idx\" class=\"hint-text\">\r\n          {{ h }}\r\n        </text>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 录音状态 -->\r\n    <view class=\"status-area\">\r\n      <view v-if=\"recording\" class=\"recording-indicator\">\r\n        <text class=\"recording-dot\">●</text>\r\n        <text class=\"recording-text\">录音中... {{ formatTime(duration) }}</text>\r\n      </view>\r\n      <view v-else-if=\"!started\" class=\"status-text\">\r\n        <text>准备好后点击开始背诵</text>\r\n      </view>\r\n      <view v-else class=\"status-text\">\r\n        <text>正在处理录音...</text>\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"recognized-area\" v-if=\"started\">\r\n      <view class=\"recognized-label\">实时识别：</view>\r\n      <text class=\"recognized-text\">{{ realtimeText || '等待识别结果...' }}</text>\r\n    </view>\r\n\r\n    <!-- 操作按钮 -->\r\n    <view class=\"action-area\">\r\n      <button\r\n        v-if=\"!started\"\r\n        type=\"primary\"\r\n        class=\"btn\"\r\n        @click=\"startRecite\"\r\n      >开始背诵</button>\r\n\r\n      <template v-if=\"recording\">\r\n        <!-- <button class=\"btn btn-hint\" @click=\"showHint\">\r\n          提醒我（已用 {{ hintCount }} 次）\r\n        </button> -->\r\n        <button type=\"warn\" class=\"btn\" @click=\"stopRecite\">\r\n          背诵结束\r\n        </button>\r\n      </template>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nconst db = uniCloud.database()\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      id: '',\r\n      textData: {},\r\n      showArticleContent: true,\r\n      started: false,\r\n      recording: false,\r\n      duration: 0,\r\n      durationTimer: null,\r\n      hintCount: 0,\r\n      hintCharCount: 0,\r\n      hints: [],\r\n      recorderManager: null,\r\n      socketTask: null,\r\n      asrConfig: null,\r\n      taskId: '',\r\n      taskStarted: false,\r\n      taskFinished: false,\r\n      frameQueue: [],\r\n      finalSentences: [],\r\n      partialSentence: '',\r\n      realtimeText: '',\r\n      stopping: false,\r\n      waitTaskFinishedResolver: null,\r\n      useWebRecorder: false,\r\n      webAudioContext: null,\r\n      webMediaStream: null,\r\n      webScriptProcessor: null,\r\n      h5MediaRecorder: null,\r\n      h5AudioChunks: [],\r\n      h5StopPromiseResolver: null\r\n    }\r\n  },\r\n  onLoad(options) {\r\n    this.id = options.id || ''\r\n    const app = getApp()\r\n    const currentText = app.globalData && app.globalData.currentText\r\n    if (currentText && currentText._id === this.id) {\r\n      this.textData = currentText\r\n    }\r\n    this.loadTextData()\r\n    this.initRecorder()\r\n  },\r\n  onUnload() {\r\n    clearInterval(this.durationTimer)\r\n    // #ifdef H5\r\n    this.cleanupH5PcmRecorder()\r\n    // #endif\r\n\r\n    if (this.recording) {\r\n      if (this.useWebRecorder) {\r\n        this.stopWebRecorder()\r\n      } else if (this.recorderManager) {\r\n        this.recorderManager.stop()\r\n      }\r\n    }\r\n    this.closeSocket()\r\n    this.destroyWebRecorder()\r\n  },\r\n  methods: {\r\n    async loadTextData() {\r\n      if (this.textData && this.textData.content) return\r\n      if (!this.id) return\r\n      try {\r\n        const res = await db.collection('gw-ancient-texts').doc(this.id).get()\r\n        const list = (res.result && res.result.data) || []\r\n        if (list.length > 0) {\r\n          this.textData = list[0]\r\n          getApp().globalData = getApp().globalData || {}\r\n          getApp().globalData.currentText = this.textData\r\n        }\r\n      } catch (e) {\r\n        uni.showToast({ title: '文章加载失败', icon: 'none' })\r\n      }\r\n    },\r\n    initRecorder() {\r\n      // #ifdef H5\r\n      this.useWebRecorder = true\r\n      return\r\n      // #endif\r\n\r\n      if (typeof uni.getRecorderManager !== 'function') {\r\n        this.useWebRecorder = true\r\n        return\r\n      }\r\n\r\n      try {\r\n        this.recorderManager = uni.getRecorderManager()\r\n      } catch (e) {\r\n        this.useWebRecorder = true\r\n        return\r\n      }\r\n\r\n      if (!this.recorderManager) {\r\n        this.useWebRecorder = true\r\n        return\r\n      }\r\n\r\n      this.recorderManager.onFrameRecorded((res) => {\r\n        this.sendAudioFrame(res.frameBuffer)\r\n      })\r\n      this.recorderManager.onStop((res) => {\r\n        this.recording = false\r\n        clearInterval(this.durationTimer)\r\n        this.handleRecorderStop()\r\n      })\r\n      this.recorderManager.onError((err) => {\r\n        this.recording = false\r\n        clearInterval(this.durationTimer)\r\n        this.closeSocket()\r\n        uni.showToast({ title: '录音失败', icon: 'none' })\r\n        console.error('录音错误:', err)\r\n      })\r\n    },\r\n    async startRecite() {\r\n      if (this.recording) return\r\n      this.showArticleContent = false\r\n      try {\r\n        this.resetRealtimeState()\r\n        // #ifdef H5\r\n        this.started = true\r\n        this.recording = true\r\n        this.stopping = false\r\n        this.duration = 0\r\n        this.durationTimer = setInterval(() => {\r\n          this.duration++\r\n        }, 1000)\r\n        await this.startH5PcmRecorder()\r\n        return\r\n        // #endif\r\n\r\n        await this.loadAsrConfig()\r\n        await this.openSocket()\r\n\r\n        this.started = true\r\n        this.recording = true\r\n        this.stopping = false\r\n        this.duration = 0\r\n        this.durationTimer = setInterval(() => {\r\n          this.duration++\r\n        }, 1000)\r\n\r\n        if (this.useWebRecorder) {\r\n          await this.startWebRecorder()\r\n        } else {\r\n          this.recorderManager.start({\r\n            format: this.asrConfig.format || 'pcm',\r\n            sampleRate: this.asrConfig.sampleRate || 16000,\r\n            numberOfChannels: 1,\r\n            frameSize: 5\r\n          })\r\n        }\r\n      } catch (err) {\r\n        this.closeSocket()\r\n        uni.showToast({ title: err.message || '启动识别失败', icon: 'none', duration: 3000 })\r\n        console.error('启动实时识别失败:', err)\r\n      }\r\n    },\r\n    showHint() {\r\n      const hintChars = this.getHintChars()\r\n      if (hintChars.length === 0) return\r\n      if (this.hintCharCount >= hintChars.length) {\r\n        uni.showToast({ title: '已无更多提示', icon: 'none' })\r\n        return\r\n      }\r\n\r\n      this.hintCharCount++\r\n      const hintText = hintChars.slice(0, this.hintCharCount).join('') + '...'\r\n      this.hints = [hintText]\r\n      this.hintCount++\r\n    },\r\n    getHintChars() {\r\n      const content = this.textData.content || ''\r\n      return [...content].filter(char => /[\\u4e00-\\u9fff]/.test(char))\r\n    },\r\n    stopRecite() {\r\n      this.stopping = true\r\n      // #ifdef H5\r\n      this.recording = false\r\n      clearInterval(this.durationTimer)\r\n      this.stopH5PcmRecorder()\r\n      return\r\n      // #endif\r\n\r\n      if (this.useWebRecorder) {\r\n        this.recording = false\r\n        clearInterval(this.durationTimer)\r\n        this.handleRecorderStop()\r\n        this.stopWebRecorder()\r\n      } else if (this.recorderManager) {\r\n        this.recorderManager.stop()\r\n      }\r\n    },\r\n    async handleRecorderStop() {\r\n      if (!this.stopping) return\r\n      uni.showLoading({ title: '正在结束识别...' })\r\n      await this.finishTask()\r\n      uni.hideLoading()\r\n      this.goResult(this.realtimeText)\r\n    },\r\n    async loadAsrConfig() {\r\n      const res = await uniCloud.callFunction({\r\n        name: 'gw_asr-config'\r\n      })\r\n      const result = res.result || {}\r\n      if (result.code !== 0 || !result.data) {\r\n        throw new Error(result.msg || '获取语音配置失败')\r\n      }\r\n      this.asrConfig = result.data\r\n    },\r\n    openSocket() {\r\n      return new Promise((resolve, reject) => {\r\n        let socketUrl = this.asrConfig.wsUrl\r\n        let socketHeader = {\r\n          Authorization: `${this.asrConfig.tokenType || 'bearer'} ${this.asrConfig.temporaryToken}`\r\n        }\r\n\r\n        // #ifdef H5\r\n        if (!window.isSecureContext) {\r\n          reject(new Error('H5 录音需要 HTTPS 或 localhost 安全上下文'))\r\n          return\r\n        }\r\n\r\n        const fallbackRelayWsUrl = this.buildDefaultRelayWsUrl()\r\n        const relayWsUrl = this.asrConfig.relayWsUrl || fallbackRelayWsUrl\r\n        if (!relayWsUrl) {\r\n          reject(new Error('H5 需要配置 relayWsUrl，或确保当前站点可用 /asr-relay'))\r\n          return\r\n        }\r\n        socketUrl = relayWsUrl\r\n        socketHeader = {}\r\n        // #endif\r\n\r\n        this.taskId = this.createTaskId()\r\n        this.socketTask = uni.connectSocket({\r\n          url: socketUrl,\r\n          header: socketHeader,\r\n          complete: () => {}\r\n        })\r\n\r\n        this.socketTask.onOpen(() => {\r\n          this.sendRunTask()\r\n          resolve()\r\n        })\r\n\r\n        this.socketTask.onMessage(({ data }) => {\r\n          this.handleSocketMessage(data)\r\n        })\r\n\r\n        this.socketTask.onError((err) => {\r\n          // #ifdef H5\r\n          reject(new Error('H5 WebSocket 连接失败，请检查临时Token是否有效，以及当前浏览器是否允许在握手中携带鉴权头'))\r\n          // #endif\r\n          // #ifndef H5\r\n          reject(err)\r\n          // #endif\r\n        })\r\n\r\n        this.socketTask.onClose(() => {\r\n          this.socketTask = null\r\n        })\r\n      })\r\n    },\r\n    sendRunTask() {\r\n      if (!this.socketTask) return\r\n      const payload = {\r\n        header: {\r\n          action: 'run-task',\r\n          task_id: this.taskId,\r\n          streaming: 'duplex'\r\n        },\r\n        payload: {\r\n          task_group: 'audio',\r\n          task: 'asr',\r\n          function: 'recognition',\r\n          model: this.asrConfig.model || 'paraformer-realtime-v2',\r\n          parameters: {\r\n            format: this.asrConfig.format || 'pcm',\r\n            sample_rate: this.asrConfig.sampleRate || 16000,\r\n            language_hints: this.asrConfig.languageHints || ['zh'],\r\n            punctuation_prediction_enabled: this.asrConfig.punctuationPredictionEnabled !== false,\r\n            inverse_text_normalization_enabled: this.asrConfig.inverseTextNormalizationEnabled !== false\r\n          },\r\n          input: {}\r\n        }\r\n      }\r\n      this.socketTask.send({\r\n        data: JSON.stringify(payload)\r\n      })\r\n    },\r\n    sendAudioFrame(frameBuffer) {\r\n      if (!frameBuffer || !this.socketTask) return\r\n      if (!this.taskStarted) {\r\n        this.frameQueue.push(frameBuffer)\r\n        return\r\n      }\r\n      this.socketTask.send({\r\n        data: frameBuffer\r\n      })\r\n    },\r\n    flushFrameQueue() {\r\n      if (!this.socketTask || !this.taskStarted || this.frameQueue.length === 0) return\r\n      while (this.frameQueue.length > 0) {\r\n        const frame = this.frameQueue.shift()\r\n        this.socketTask.send({ data: frame })\r\n      }\r\n    },\r\n    handleSocketMessage(rawData) {\r\n      const decoded = this.decodeSocketData(rawData)\r\n      if (!decoded) return\r\n      let message = decoded\r\n      try {\r\n        message = JSON.parse(decoded)\r\n      } catch (e) {\r\n        return\r\n      }\r\n      const header = message.header || {}\r\n      const event = header.event\r\n\r\n      if (event === 'task-started') {\r\n        this.taskStarted = true\r\n        this.flushFrameQueue()\r\n        return\r\n      }\r\n\r\n      if (event === 'result-generated') {\r\n        this.handleRecognizedSentence(message.payload && message.payload.output && message.payload.output.sentence)\r\n        return\r\n      }\r\n\r\n      if (event === 'task-finished') {\r\n        this.taskFinished = true\r\n        if (this.waitTaskFinishedResolver) {\r\n          this.waitTaskFinishedResolver()\r\n          this.waitTaskFinishedResolver = null\r\n        }\r\n        this.closeSocket()\r\n        return\r\n      }\r\n\r\n      if (event === 'task-failed') {\r\n        console.error('任务失败:', header.error_message || '未知错误')\r\n        if (this.waitTaskFinishedResolver) {\r\n          this.waitTaskFinishedResolver()\r\n          this.waitTaskFinishedResolver = null\r\n        }\r\n        this.closeSocket()\r\n      }\r\n    },\r\n    decodeSocketData(rawData) {\r\n      if (typeof rawData === 'string') return rawData\r\n      if (!(rawData instanceof ArrayBuffer)) return ''\r\n\r\n      if (typeof TextDecoder !== 'undefined') {\r\n        return new TextDecoder('utf-8').decode(rawData)\r\n      }\r\n\r\n      const bytes = new Uint8Array(rawData)\r\n      let result = ''\r\n      for (let i = 0; i < bytes.length; i++) {\r\n        result += String.fromCharCode(bytes[i])\r\n      }\r\n      return decodeURIComponent(escape(result))\r\n    },\r\n    handleRecognizedSentence(sentence) {\r\n      if (!sentence || sentence.heartbeat) return\r\n      const text = sentence.text || ''\r\n      if (!text) return\r\n\r\n      if (sentence.sentence_end) {\r\n        this.finalSentences.push(text)\r\n        this.partialSentence = ''\r\n      } else {\r\n        this.partialSentence = text\r\n      }\r\n\r\n      this.realtimeText = `${this.finalSentences.join('')}${this.partialSentence}`\r\n    },\r\n    finishTask() {\r\n      return new Promise((resolve) => {\r\n        if (!this.socketTask) {\r\n          resolve()\r\n          return\r\n        }\r\n\r\n        if (this.taskStarted && !this.taskFinished) {\r\n          this.socketTask.send({\r\n            data: JSON.stringify({\r\n              header: {\r\n                action: 'finish-task',\r\n                task_id: this.taskId,\r\n                streaming: 'duplex'\r\n              },\r\n              payload: {\r\n                input: {}\r\n              }\r\n            })\r\n          })\r\n        }\r\n\r\n        const timer = setTimeout(() => {\r\n          this.closeSocket()\r\n          resolve()\r\n        }, 5000)\r\n\r\n        this.waitTaskFinishedResolver = () => {\r\n          clearTimeout(timer)\r\n          resolve()\r\n        }\r\n      })\r\n    },\r\n    closeSocket() {\r\n      if (!this.socketTask) return\r\n      try {\r\n        this.socketTask.close({})\r\n      } catch (e) {\r\n        console.error('关闭 socket 失败:', e)\r\n      }\r\n      this.socketTask = null\r\n    },\r\n    resetRealtimeState() {\r\n      this.taskId = ''\r\n      this.taskStarted = false\r\n      this.taskFinished = false\r\n      this.frameQueue = []\r\n      this.finalSentences = []\r\n      this.partialSentence = ''\r\n      this.realtimeText = ''\r\n      this.waitTaskFinishedResolver = null\r\n    },\r\n    createTaskId() {\r\n      return `${Date.now()}-${Math.random().toString(16).slice(2, 10)}`\r\n    },\r\n    buildDefaultRelayWsUrl() {\r\n      // #ifdef H5\r\n      if (!window.location || !window.location.host) return ''\r\n      const wsProtocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:'\r\n      return `${wsProtocol}//${window.location.host}/asr-relay`\r\n      // #endif\r\n      // #ifndef H5\r\n      return ''\r\n      // #endif\r\n    },\r\n    async startWebRecorder() {\r\n      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\r\n        throw new Error('当前浏览器不支持录音')\r\n      }\r\n\r\n      const targetSampleRate = this.asrConfig.sampleRate || 16000\r\n      this.webMediaStream = await navigator.mediaDevices.getUserMedia({ audio: true })\r\n      this.webAudioContext = new (window.AudioContext || window.webkitAudioContext)()\r\n      const source = this.webAudioContext.createMediaStreamSource(this.webMediaStream)\r\n      this.webScriptProcessor = this.webAudioContext.createScriptProcessor(4096, 1, 1)\r\n\r\n      this.webScriptProcessor.onaudioprocess = (event) => {\r\n        if (!this.recording || !this.socketTask) return\r\n        const inputData = event.inputBuffer.getChannelData(0)\r\n        const pcmBuffer = this.convertFloat32To16kPcm(inputData, this.webAudioContext.sampleRate, targetSampleRate)\r\n        if (pcmBuffer && pcmBuffer.byteLength > 0) {\r\n          this.sendAudioFrame(pcmBuffer)\r\n        }\r\n      }\r\n\r\n      source.connect(this.webScriptProcessor)\r\n      this.webScriptProcessor.connect(this.webAudioContext.destination)\r\n    },\r\n    async startH5PcmRecorder() {\r\n      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\r\n        throw new Error('当前浏览器不支持录音')\r\n      }\r\n      if (typeof MediaRecorder === 'undefined') {\r\n        throw new Error('当前浏览器不支持 MediaRecorder')\r\n      }\r\n\r\n      this.h5AudioChunks = []\r\n      this.webMediaStream = await navigator.mediaDevices.getUserMedia({ audio: true })\r\n\r\n      this.h5MediaRecorder = new MediaRecorder(this.webMediaStream, {\r\n        mimeType: 'audio/webm'\r\n      })\r\n      this.h5MediaRecorder.ondataavailable = (evt) => {\r\n        if (evt.data && evt.data.size > 0) {\r\n          this.h5AudioChunks.push(evt.data)\r\n        }\r\n      }\r\n      this.h5MediaRecorder.onstop = async () => {\r\n        if (!this.stopping) return\r\n        try {\r\n          uni.showLoading({ title: '语音识别中...' })\r\n          const audioBlob = new Blob(this.h5AudioChunks, { type: 'audio/webm' })\r\n          const audioBase64 = await this.blobToBase64(audioBlob)\r\n          const callRes = await uniCloud.callFunction({\r\n            name: 'gw_asr-file-recognize',\r\n            data: {\r\n              audioBase64,\r\n              format: 'webm'\r\n            }\r\n          })\r\n          const result = callRes.result || {}\r\n          if (result.code !== 0) {\r\n            throw new Error(result.msg || '识别失败')\r\n          }\r\n          this.realtimeText = (result.data && result.data.text) || ''\r\n          this.goResult(this.realtimeText)\r\n        } catch (error) {\r\n          uni.showToast({ title: error.message || '识别失败', icon: 'none' })\r\n          console.error('H5 文件识别失败:', error)\r\n        } finally {\r\n          uni.hideLoading()\r\n          this.cleanupH5PcmRecorder()\r\n          if (this.h5StopPromiseResolver) {\r\n            this.h5StopPromiseResolver()\r\n            this.h5StopPromiseResolver = null\r\n          }\r\n        }\r\n      }\r\n      this.h5MediaRecorder.start()\r\n    },\r\n    async stopH5PcmRecorder() {\r\n      if (!this.h5MediaRecorder || this.h5MediaRecorder.state === 'inactive') {\r\n        this.cleanupH5PcmRecorder()\r\n        return\r\n      }\r\n      await new Promise((resolve) => {\r\n        this.h5StopPromiseResolver = resolve\r\n        this.h5MediaRecorder.stop()\r\n      })\r\n    },\r\n    cleanupH5PcmRecorder() {\r\n      if (this.webMediaStream) {\r\n        this.webMediaStream.getTracks().forEach(track => track.stop())\r\n      }\r\n      this.webMediaStream = null\r\n      this.h5MediaRecorder = null\r\n      this.h5AudioChunks = []\r\n      this.h5StopPromiseResolver = null\r\n    },\r\n    blobToBase64(blob) {\r\n      return new Promise((resolve, reject) => {\r\n        const reader = new FileReader()\r\n        reader.onload = () => {\r\n          const result = reader.result || ''\r\n          const base64 = String(result).split(',')[1] || ''\r\n          resolve(base64)\r\n        }\r\n        reader.onerror = reject\r\n        reader.readAsDataURL(blob)\r\n      })\r\n    },\r\n    stopWebRecorder() {\r\n      if (this.webScriptProcessor) {\r\n        this.webScriptProcessor.disconnect()\r\n        this.webScriptProcessor.onaudioprocess = null\r\n      }\r\n      if (this.webMediaStream) {\r\n        this.webMediaStream.getTracks().forEach(track => track.stop())\r\n      }\r\n      if (this.webAudioContext) {\r\n        this.webAudioContext.close()\r\n      }\r\n      this.webScriptProcessor = null\r\n      this.webMediaStream = null\r\n      this.webAudioContext = null\r\n    },\r\n    destroyWebRecorder() {\r\n      this.stopWebRecorder()\r\n    },\r\n    convertFloat32To16kPcm(float32Array, inputSampleRate, outputSampleRate) {\r\n      if (!float32Array || float32Array.length === 0) return null\r\n      const ratio = inputSampleRate / outputSampleRate\r\n      const outputLength = Math.max(1, Math.floor(float32Array.length / ratio))\r\n      const result = new Int16Array(outputLength)\r\n      let offsetResult = 0\r\n      let offsetBuffer = 0\r\n\r\n      while (offsetResult < outputLength) {\r\n        const nextOffsetBuffer = Math.floor((offsetResult + 1) * ratio)\r\n        let accum = 0\r\n        let count = 0\r\n        for (let i = offsetBuffer; i < nextOffsetBuffer && i < float32Array.length; i++) {\r\n          accum += float32Array[i]\r\n          count++\r\n        }\r\n        const sample = count > 0 ? accum / count : 0\r\n        const clamped = Math.max(-1, Math.min(1, sample))\r\n        result[offsetResult] = clamped < 0 ? clamped * 0x8000 : clamped * 0x7FFF\r\n        offsetResult++\r\n        offsetBuffer = nextOffsetBuffer\r\n      }\r\n\r\n      return result.buffer\r\n    },\r\n    goResult(recognizedText) {\r\n      getApp().globalData = getApp().globalData || {}\r\n      getApp().globalData.reciteResult = {\r\n        textData: this.textData,\r\n        recognizedText,\r\n        hintCount: this.hintCount,\r\n        duration: Number(this.duration) || 0\r\n      }\r\n      uni.redirectTo({\r\n        url: `/pages/ancient/result?id=${this.id}`\r\n      })\r\n    },\r\n    formatTime(seconds) {\r\n      const m = Math.floor(seconds / 60)\r\n      const s = seconds % 60\r\n      return `${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  padding: 40rpx;\r\n  min-height: 100vh;\r\n  background: #f5f5f5;\r\n}\r\n.title-bar {\r\n  text-align: center;\r\n  margin-bottom: 60rpx;\r\n}\r\n.title {\r\n  display: block;\r\n  font-size: 44rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  margin-bottom: 12rpx;\r\n}\r\n.meta {\r\n  font-size: 28rpx;\r\n  color: #888;\r\n}\r\n.content-box {\r\n  background: #fff;\r\n  border-radius: 16rpx;\r\n  padding: 36rpx 30rpx;\r\n  margin-bottom: 36rpx;\r\n  box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.06);\r\n}\r\n.content {\r\n  font-size: 34rpx;\r\n  color: #333;\r\n  line-height: 2;\r\n  letter-spacing: 1rpx;\r\n}\r\n.hint-area {\r\n  background: #fffbe6;\r\n  border-radius: 12rpx;\r\n  padding: 24rpx;\r\n  margin-bottom: 40rpx;\r\n  border-left: 6rpx solid #faad14;\r\n}\r\n.hint-label {\r\n  font-size: 26rpx;\r\n  color: #999;\r\n  margin-bottom: 12rpx;\r\n}\r\n.hint-text {\r\n  display: block;\r\n  font-size: 32rpx;\r\n  color: #333;\r\n  line-height: 1.8;\r\n}\r\n.status-area {\r\n  text-align: center;\r\n  margin-bottom: 60rpx;\r\n  padding: 40rpx 0;\r\n}\r\n.recording-indicator {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.recording-dot {\r\n  color: #e74c3c;\r\n  font-size: 40rpx;\r\n  margin-right: 12rpx;\r\n  animation: blink 1s infinite;\r\n}\r\n@keyframes blink {\r\n  0%, 100% { opacity: 1; }\r\n  50% { opacity: 0.3; }\r\n}\r\n.recording-text {\r\n  font-size: 32rpx;\r\n  color: #333;\r\n}\r\n.status-text {\r\n  font-size: 30rpx;\r\n  color: #999;\r\n}\r\n.recognized-area {\r\n  background: #fff;\r\n  border-radius: 12rpx;\r\n  padding: 24rpx;\r\n  margin-bottom: 30rpx;\r\n}\r\n.recognized-label {\r\n  font-size: 26rpx;\r\n  color: #999;\r\n  margin-bottom: 12rpx;\r\n}\r\n.recognized-text {\r\n  display: block;\r\n  font-size: 30rpx;\r\n  color: #333;\r\n  line-height: 1.8;\r\n  min-height: 80rpx;\r\n}\r\n.action-area {\r\n  padding: 0 20rpx;\r\n}\r\n.btn {\r\n  width: 100%;\r\n  margin-bottom: 24rpx;\r\n  border-radius: 12rpx;\r\n}\r\n.btn-hint {\r\n  background: #fff;\r\n  color: #333;\r\n  border: 1rpx solid #ddd;\r\n}\r\n</style>\r\n","import MiniProgramPage from '/Users/chensm/Desktop/my-source/github.com/simwy/AI-Recite-Ancient-Mobile/pages/ancient/recite.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","uni"],"mappings":"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"}