{"version":3,"file":"opendb-feedback.js","sources":["uni_modules/uni-feedback/js_sdk/validator/opendb-feedback.js"],"sourcesContent":["// 表单校验规则由 schema2code 生成，不建议直接修改校验规则，而建议通过 schema2code 生成, 详情: https://uniapp.dcloud.net.cn/uniCloud/schema\n\n\nconst validator = {\n  \"content\": {\n    \"rules\": [\n      {\n        \"required\": true\n      },\n      {\n        \"format\": \"string\"\n      }\n    ],\n    \"label\": \"留言内容/回复内容\"\n  },\n  \"imgs\": {\n    \"rules\": [\n      {\n        \"format\": \"array\"\n      },\n      {\n        \"arrayType\": \"file\"\n      },\n      {\n        \"maxLength\": 6\n      }\n    ],\n    \"label\": \"图片列表\"\n  },\n  \"contact\": {\n    \"rules\": [\n      {\n        \"format\": \"string\"\n      }\n    ],\n    \"label\": \"联系人\"\n  },\n  \"mobile\": {\n    \"rules\": [\n      {\n        \"format\": \"string\"\n      },\n      {\n        \"pattern\": \"^\\\\+?[0-9-]{3,20}$\"\n      }\n    ],\n    \"label\": \"联系电话\"\n  }\n}\n\nconst enumConverter = {}\n\nfunction filterToWhere(filter, command) {\n  let where = {}\n  for (let field in filter) {\n    let { type, value } = filter[field]\n    switch (type) {\n      case \"search\":\n        if (typeof value === 'string' && value.length) {\n          where[field] = new RegExp(value)\n        }\n        break;\n      case \"select\":\n        if (value.length) {\n          let selectValue = []\n          for (let s of value) {\n            selectValue.push(command.eq(s))\n          }\n          where[field] = command.or(selectValue)\n        }\n        break;\n      case \"range\":\n        if (value.length) {\n          let gt = value[0]\n          let lt = value[1]\n          where[field] = command.and([command.gte(gt), command.lte(lt)])\n        }\n        break;\n      case \"date\":\n        if (value.length) {\n          let [s, e] = value\n          let startDate = new Date(s)\n          let endDate = new Date(e)\n          where[field] = command.and([command.gte(startDate), command.lte(endDate)])\n        }\n        break;\n      case \"timestamp\":\n        if (value.length) {\n          let [startDate, endDate] = value\n          where[field] = command.and([command.gte(startDate), command.lte(endDate)])\n        }\n        break;\n    }\n  }\n  return where\n}\n\nexport { validator, enumConverter, filterToWhere }\n"],"names":[],"mappings":";AAGK,MAAC,YAAY;AAAA,EAChB,WAAW;AAAA,IACT,SAAS;AAAA,MACP;AAAA,QACE,YAAY;AAAA,MACb;AAAA,MACD;AAAA,QACE,UAAU;AAAA,MACX;AAAA,IACF;AAAA,IACD,SAAS;AAAA,EACV;AAAA,EACD,QAAQ;AAAA,IACN,SAAS;AAAA,MACP;AAAA,QACE,UAAU;AAAA,MACX;AAAA,MACD;AAAA,QACE,aAAa;AAAA,MACd;AAAA,MACD;AAAA,QACE,aAAa;AAAA,MACd;AAAA,IACF;AAAA,IACD,SAAS;AAAA,EACV;AAAA,EACD,WAAW;AAAA,IACT,SAAS;AAAA,MACP;AAAA,QACE,UAAU;AAAA,MACX;AAAA,IACF;AAAA,IACD,SAAS;AAAA,EACV;AAAA,EACD,UAAU;AAAA,IACR,SAAS;AAAA,MACP;AAAA,QACE,UAAU;AAAA,MACX;AAAA,MACD;AAAA,QACE,WAAW;AAAA,MACZ;AAAA,IACF;AAAA,IACD,SAAS;AAAA,EACV;AACH;;"}